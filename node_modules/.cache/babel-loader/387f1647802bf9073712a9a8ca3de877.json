{"ast":null,"code":"import _toConsumableArray from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/will/Documents/beader.org/react/src/components/Designer.js\";\nimport React, { Component } from 'react';\nimport store from 'store';\nimport { apiPath } from '../config';\nimport { UserContext } from '../App';\nvar images = {\n  alignPixel: require('../images/align-pixel.png'),\n  alignNormal: require('../images/align-normal.png'),\n  alignHorizontal: require('../images/align-horizontal.png'),\n  alignVertical: require('../images/align-vertical.png'),\n  brush: require('../images/brush.png'),\n  fill: require('../images/fill.png'),\n  picker: require('../images/picker.png')\n};\n\nvar Designer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Designer, _Component);\n\n  function Designer(props) {\n    var _this;\n\n    _classCallCheck(this, Designer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Designer).call(this, props));\n    _this.myRefs = {};\n    _this.clearColor = 'ffffff';\n    _this.colors = ['000000', '412000', '451904', '5d1f0c', '4a1700', '490036', '48036c', '051e81', '0b0779', '1d295a', '004b59', '004800', '164000', '2c3500', '463a09', '401a02', '252525', '542800', '721e11', '7a240d', '721f00', '66004b', '5c0488', '0626a5', '201c8e', '1d3876', '005d6e', '005400', '1c5300', '384400', '4d3f09', '581f05', '343434', '763700', '9f241e', '982c0e', 'a81300', '80035f', '650d90', '082fca', '3531a3', '1d4892', '006f84', '036b03', '236600', '445200', '544509', '702408', '4e4e4e', '9a5000', 'b33a20', 'b02f0f', 'c8210a', '950f74', '7b23a7', '263dd4', '4642b4', '1d5cac', '00849c', '0e760e', '287800', '495600', '6c5809', '8d3a13', '686868', 'c36806', 'c85120', 'bf3624', 'df2512', 'aa2288', '933bbf', '444cde', '5753c5', '1d71c6', '0099bf', '188018', '2e8c00', '607100', '907609', 'ab511f', '757575', 'e47b07', 'e36920', 'd34e2a', 'ec3b24', 'ba3d99', '9d45c9', '4f5aec', '615dcf', '3286cf', '00abca', '279227', '3a980c', '6c7f00', 'ab8b0a', 'b56427', '8e8e8e', 'ff911a', 'fc8120', 'e7623e', 'fa5236', 'ca4da9', 'a74fd3', '5a68ff', '6d69db', '489bd9', '00bcde', '36a436', '47a519', '798d0a', 'c1a120', 'bf7730', 'a4a4a4', 'ffab1d', 'fd8c25', 'f36e4a', 'fc6148', 'd75ab6', 'b25ade', '6575ff', '7b77e9', '4ea8ec', '00d0f5', '4eb94e', '51af23', '8b9f1c', 'd0b02f', 'd0853a', 'b8b8b8', 'ffc51f', 'fe982c', 'fd7854', 'ff705f', 'e467c3', 'bd65e9', '7183ff', '8985f7', '55b6ff', '10dcff', '51cd51', '5cba2e', '9eb22f', 'debe3d', 'e19344', 'c5c5c5', 'ffd03b', 'ffae38', 'ff8a6a', 'ff7e7e', 'ef72ce', 'c56df1', '8091ff', '918dff', '69caff', '3ee1ff', '72da72', '71cf43', 'abbf3c', 'e6c645', 'eda04e', 'd0d0d0', 'ffd84c', 'ffb946', 'ff987c', 'ff8f8f', 'fb7eda', 'ce76fa', '90a0ff', '9c98ff', '74cbff', '64e7ff', '7ce47c', '85e357', 'b8cc49', 'edcd4c', 'f9ad58', 'd7d7d7', 'ffe651', 'ffbf51', 'ffa48b', 'ff9d9e', 'ff8de1', 'd583ff', '97a9ff', 'a7a4ff', '82d3ff', '76eaff', '85ed85', '8deb5f', 'c2d653', 'f5d862', 'fcb75c', 'e1e1e1', 'fff456', 'ffc66d', 'ffb39e', 'ffabad', 'ff9de5', 'da90ff', '9fb2ff', 'b2afff', '8ddaff', '8bedff', '99f299', '97f569', 'cde153', 'fbe276', 'ffc160', 'eaeaea', 'fff970', 'ffd587', 'ffc2b2', 'ffb9bd', 'ffa5e7', 'de9cff', 'afbeff', 'bbb8ff', '9fd4ff', '9aefff', 'b3f7b3', 'a0fe72', 'dbef6c', 'fcee98', 'ffca69', 'f4f4f4', 'ffff90', 'ffe498', 'ffd0c3', 'ffc7ce', 'ffafea', 'e2a9ff', 'c0cbff', 'c3c1ff', 'b4e2ff', 'b1f3ff', 'c3f9c3', 'b1ff8a', 'e8fc79', 'fdf3a9', 'ffcf7e', 'ffffff', 'ffffaa', 'ffe6ab', 'ffdad0', 'ffcade', 'ffb8ec', 'e6b6ff', 'cdd3ff', 'd3d1ff', 'c0ebff', 'c7f6ff', 'cdfccd', 'bcff9a', 'f2ffab', 'fdf3be', 'ffda96'];\n    _this.hidePaletteTimeout = null;\n    _this.canvasWidth = 700;\n    _this.canvasHeight = 700;\n    _this.previewWidth = 150;\n    _this.previewHeight = 150;\n    _this.paletteWidth = 400;\n    _this.paletteHeight = 300;\n    _this.paletteCols = 16;\n    _this.paletteRows = 16;\n    _this.state = {\n      width: 10,\n      height: 10,\n      previousWidth: 10,\n      previousHeight: 10,\n      name: 'Untitled Pattern',\n      align: 'normal',\n      mode: 'brush',\n      color: '000000',\n      drawing: false,\n      pattern: new Array(100).fill('ffffff'),\n      saving: false,\n      oldColor: '000000',\n      showPalette: false\n    };\n    _this.myRefs = {\n      palette: React.createRef(),\n      paletteWrapper: React.createRef(),\n      color: React.createRef(),\n      saveButton: React.createRef(),\n      preview: React.createRef(),\n      grid: React.createRef()\n    };\n    return _this;\n  }\n\n  _createClass(Designer, [{\n    key: \"initPattern\",\n    value: function initPattern() {\n      var newPattern = []; // Clear pattern to new size\n\n      for (var ii = 0; ii < this.state.width * this.state.height; ii++) {\n        newPattern.push(this.clearColor);\n      } // Copy previous pattern\n\n\n      for (var _ii = 0; _ii < this.state.previousWidth; _ii++) {\n        if (_ii >= this.state.width) break;\n\n        for (var jj = 0; jj < this.state.previousHeight; jj++) {\n          if (jj >= this.state.height) break;\n          newPattern[_ii + jj * this.state.width] = this.state.pattern[_ii + jj * this.state.previousWidth];\n        }\n      }\n\n      this.setState({\n        pattern: newPattern,\n        previewWidth: this.state.width,\n        previousHeight: this.state.height\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initPattern(); // this.renderGrid();\n\n      this.renderPalette();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.renderGrid();\n    }\n  }, {\n    key: \"renderPalette\",\n    value: function renderPalette() {\n      var palette = this.myRefs.palette.current;\n      var context = palette.getContext('2d');\n      var width = (this.paletteWidth - 1) / this.paletteCols - 1;\n      var height = (this.paletteHeight - 1) / this.paletteRows - 1;\n\n      for (var y = 0; y < this.paletteRows; y++) {\n        for (var x = 0; x < this.paletteCols; x++) {\n          context.beginPath();\n          context.fillStyle = '#' + this.colors[y * this.paletteCols + x];\n          context.fillRect(x * (width + 1), y * (height + 1), width, height);\n          context.strokeStyle = '#ffffff';\n          context.lineWidth = 1;\n          context.stroke();\n        }\n      }\n\n      this.hidePalette();\n    }\n  }, {\n    key: \"showPalette\",\n    value: function showPalette() {\n      this.setState({\n        oldColor: this.state.color,\n        showPalette: true\n      });\n      clearTimeout(this.hidePaletteTimeout);\n    }\n  }, {\n    key: \"hidePalette\",\n    value: function hidePalette() {\n      var _this2 = this;\n\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.hidePaletteTimeout = setTimeout(function () {\n        _this2.setState({\n          showPalette: false\n        });\n      }, delay);\n    }\n  }, {\n    key: \"getOffset\",\n    value: function getOffset(el) {\n      var box = el.getBoundingClientRect();\n      return {\n        top: box.top + window.pageYOffset - document.documentElement.clientTop,\n        left: box.left + window.pageXOffset - document.documentElement.clientLeft\n      };\n    }\n  }, {\n    key: \"resetColor\",\n    value: function resetColor() {\n      this.setState({\n        color: this.state.oldColor\n      });\n    }\n  }, {\n    key: \"selectColor\",\n    value: function selectColor(e) {\n      var hide = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var palette = this.myRefs.palette.current;\n      var width = this.paletteWidth / this.paletteCols;\n      var height = this.paletteHeight / this.paletteRows;\n      var offset = this.getOffset(palette);\n      var offsetX = e.pageX - offset.left;\n      var offsetY = e.pageY - offset.top;\n      var x = Math.floor(offsetX / width);\n      var y = Math.floor(offsetY / height);\n      this.setState({\n        color: this.colors[y * this.paletteCols + x]\n      });\n\n      if (hide) {\n        this.hidePalette();\n        this.setState({\n          oldColor: this.state.color\n        });\n      }\n    }\n  }, {\n    key: \"setMode\",\n    value: function setMode(mode) {\n      this.setState({\n        mode: mode\n      });\n    }\n  }, {\n    key: \"setAlign\",\n    value: function setAlign(align) {\n      this.setState({\n        align: align\n      }); // this.renderGrid();\n    }\n  }, {\n    key: \"startDrawing\",\n    value: function startDrawing() {\n      this.setState({\n        drawing: true\n      });\n    }\n  }, {\n    key: \"stopDrawing\",\n    value: function stopDrawing() {\n      this.setState({\n        drawing: false\n      });\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(e) {\n      if (this.state.drawing && this.state.mode === 'brush') {\n        this.draw.apply(this, _toConsumableArray(this.getXY(e)));\n      }\n    }\n  }, {\n    key: \"getXY\",\n    value: function getXY(e) {\n      e = e.nativeEvent;\n      var size = this.state.width > this.state.height ? this.canvasWidth / this.state.width : this.canvasHeight / this.state.height;\n\n      if (this.state.align !== 'normal' && this.state.align !== 'pixel') {\n        size = this.state.width > this.state.height ? size - size / this.state.width / 2 : size - size / this.state.height / 2;\n      }\n\n      var x, y;\n      var centeringOffset = (this.canvasWidth - size * this.state.width) / 2;\n\n      if (this.state.align === 'horizontal') {\n        y = Math.floor(e.offsetY / size);\n        var horizontalOffset = !(y % 2) ? size / 2 : 0;\n        centeringOffset -= size / 4;\n        x = Math.floor((e.offsetX - centeringOffset - horizontalOffset) / size);\n      }\n\n      if (this.state.align === 'vertical') {\n        x = Math.floor((e.offsetX - centeringOffset) / size);\n        var verticalOffset = x % 2 ? size / 2 : 0;\n        y = Math.floor((e.offsetY - verticalOffset) / size);\n      }\n\n      if (this.state.align === 'normal' || this.state.align === 'pixel') {\n        x = Math.floor((e.offsetX - centeringOffset) / size);\n        y = Math.floor(e.offsetY / size);\n      }\n\n      return [x, y];\n    }\n  }, {\n    key: \"click\",\n    value: function click(e) {\n      if (this.state.mode === 'brush') {\n        var xy = this.getXY(e);\n        this.stopDrawing(e);\n        this.draw.apply(this, _toConsumableArray(xy));\n      }\n\n      if (this.state.mode === 'fill') {\n        this.fill.apply(this, _toConsumableArray(this.getXY(e)));\n      }\n    }\n  }, {\n    key: \"getPatternCell\",\n    value: function getPatternCell(x, y) {\n      return this.state.pattern[x + y * this.state.width];\n    }\n  }, {\n    key: \"setPatternCell\",\n    value: function setPatternCell(x, y, color) {\n      var pattern = this.state.pattern;\n      pattern[x + y * this.state.width] = color;\n      this.setState({\n        pattern: pattern\n      });\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(x, y) {\n      this.setPatternCell(x, y, this.state.color); // this.renderGrid();\n    }\n  }, {\n    key: \"fill\",\n    value: function fill(x, y) {\n      var oldColor = this.getPatternCell(x, y) || this.clearColor;\n      if (oldColor === this.state.color) return;\n      var stack = [[x, y]];\n\n      while (stack.length) {\n        var cell = stack.pop();\n        var _x = cell[0];\n        var _y = cell[1];\n        this.setPatternCell(_x, _y, this.state.color);\n        if (_x - 1 >= 0 && oldColor === (this.getPatternCell(_x - 1, _y) || 'ffffff')) stack.push([_x - 1, _y]);\n        if (_x + 1 < this.state.width && oldColor === (this.getPatternCell(_x + 1, _y) || 'ffffff')) stack.push([_x + 1, _y]);\n        if (_y - 1 >= 0 && oldColor === (this.getPatternCell(_x, _y - 1) || 'ffffff')) stack.push([_x, _y - 1]);\n        if (_y + 1 < this.state.height && oldColor === (this.getPatternCell(_x, _y + 1) || 'ffffff')) stack.push([_x, _y + 1]);\n      } // this.renderGrid();\n\n    }\n  }, {\n    key: \"renderGrid\",\n    value: function renderGrid() {\n      var canvas = this.myRefs.grid.current;\n      var context = canvas.getContext('2d');\n      var size = this.state.width > this.state.height ? this.canvasWidth / this.state.width : this.canvasHeight / this.state.height;\n\n      if (this.state.align !== 'normal' && this.state.align !== 'pixel') {\n        size = this.state.width > this.state.height ? size - size / this.state.width / 2 : size - size / this.state.height / 2;\n      }\n\n      var horizontalOffset = this.state.align === 'horizontal' ? size / 2 : 0;\n      var verticalOffset = this.state.align === 'vertical' ? size / 2 : 0;\n      var centeringOffset = (this.canvasWidth - size * this.state.width - horizontalOffset) / 2;\n      canvas.setAttribute('width', canvas.getAttribute('width')); // Clear canvas\n\n      for (var x = 0; x < this.state.width; x++) {\n        for (var y = 0; y < this.state.height; y++) {\n          context.beginPath();\n\n          if (this.state.align === 'pixel') {\n            context.rect(x * size + centeringOffset, y * size, size, size);\n          } else {\n            context.arc(x * size + size / 2 + (!(y % 2) ? horizontalOffset : 0) + centeringOffset, y * size + size / 2 + (x % 2 ? verticalOffset : 0), size / 2 - 1, 0, 2 * Math.PI, false);\n          }\n\n          context.fillStyle = '#' + (this.getPatternCell(x, y) || this.clearColor);\n          context.fill();\n          context.lineWidth = 1;\n          context.strokeStyle = '#ddd';\n          context.stroke();\n        }\n      } // Generate preview\n      // NOTE: Because the browser doesn't provide proper antialiasing,\n      // we use a small hack to draw the image at increasingly small sizes\n      // to smooth out the final image\n\n\n      var preview = this.myRefs.preview.current;\n      var previewContext = preview.getContext('2d');\n      var step1 = document.createElement('canvas');\n      var step1Context = step1.getContext('2d');\n      step1.width = this.canvasWidth / 2;\n      step1.height = this.canvasHeight / 2;\n      step1Context.clearRect(0, 0, step1.width, step1.height);\n      step1Context.drawImage(context.canvas, 0, 0, this.canvasWidth, this.canvasHeight, 0, 0, step1.width, step1.height);\n      previewContext.clearRect(0, 0, this.previewWidth, this.previewHeight);\n      previewContext.drawImage(step1, 0, 0, step1.width, step1.height, 0, 0, this.previewWidth, this.previewHeight);\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      var _this3 = this;\n\n      var token = store.get('token');\n      this.setState({\n        saving: true\n      });\n\n      if (!this.state.pattern.find(function (cell) {\n        return cell !== _this3.state.pattern[0];\n      })) {\n        this.setState({\n          saving: false\n        });\n        return alert('Pattern must have more than one color!');\n      }\n\n      fetch(\"\".concat(apiPath, \"/patterns\"), {\n        method: 'post',\n        body: JSON.stringify({\n          name: this.state.name,\n          description: '',\n          width: this.state.width,\n          height: this.state.height,\n          align: this.state.align,\n          pattern: this.state.pattern\n        }),\n        headers: new Headers({\n          'Authorization': \"Bearer \".concat(token),\n          'Content-Type': 'application/json'\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        _this3.setState({\n          saving: false\n        }); // TODO: Navigate to pattern route (/patterns/${response._id})\n\n      }).catch(function (error) {\n        alert('Error: ' + error);\n\n        _this3.setState({\n          saving: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          color = _this$state.color,\n          align = _this$state.align,\n          width = _this$state.width,\n          height = _this$state.height,\n          name = _this$state.name,\n          saving = _this$state.saving,\n          mode = _this$state.mode;\n      var paletteWidth = this.paletteWidth,\n          paletteHeight = this.paletteHeight;\n      return React.createElement(UserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, function (user) {\n        return React.createElement(\"div\", {\n          id: \"editor\",\n          ref: _this4.myRefs.editor,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 370\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"tools\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 371\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"button-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 372\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: align === 'pixel' ? 'active' : '',\n          onClick: function onClick() {\n            return _this4.setAlign('pixel');\n          },\n          id: \"align-pixel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.alignPixel,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Align Pixel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: align === 'normal' ? 'active' : '',\n          onClick: function onClick() {\n            return _this4.setAlign('normal');\n          },\n          id: \"align-normal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 376\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.alignNormal,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Align Normal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: align === 'horizontal' ? 'active' : '',\n          onClick: function onClick() {\n            return _this4.setAlign('horizontal');\n          },\n          id: \"align-horizontal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 379\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.alignHorizontal,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Align Horizontal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 380\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: align === 'vertical' ? 'active' : '',\n          onClick: function onClick() {\n            return _this4.setAlign('vertical');\n          },\n          id: \"align-vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 382\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.alignVertical,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Align Vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"button-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: mode === 'brush' ? 'active' : '',\n          onClick: function onClick() {\n            return _this4.setMode('brush');\n          },\n          id: \"mode-brush\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.brush,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Brush Tool\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 389\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: mode === 'fill' ? 'active' : '',\n          onClick: function onClick() {\n            return _this4.setMode('fill');\n          },\n          id: \"mode-fill\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.fill,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Fill Tool\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 392\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"button-group show-overflow color-wrapper\",\n          onMouseOver: function onMouseOver() {\n            return _this4.showPalette();\n          },\n          onMouseLeave: function onMouseLeave() {\n            return _this4.hidePalette(400);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 396\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          id: \"color\",\n          style: {\n            backgroundColor: \"#\".concat(color)\n          },\n          ref: _this4.myRefs.color,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: images.picker,\n          width: \"30\",\n          height: \"30\",\n          alt: \"Picker Tool\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 398\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          id: \"palette-wrapper\",\n          className: _this4.state.showPalette ? 'show' : '',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401\n          },\n          __self: this\n        }, React.createElement(\"canvas\", {\n          onClick: function onClick(e) {\n            return _this4.selectColor(e, true);\n          },\n          onMouseMove: function onMouseMove(e) {\n            return _this4.selectColor(e);\n          },\n          onMouseDown: function onMouseDown(e) {\n            return _this4.selectColor(e, true);\n          },\n          onMouseLeave: function onMouseLeave() {\n            return _this4.resetColor();\n          },\n          id: \"palette\",\n          ref: _this4.myRefs.palette,\n          width: paletteWidth,\n          height: paletteHeight,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 415\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"select\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 416\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          value: width,\n          onChange: function onChange(e) {\n            return _this4.setState({\n              width: e.target.value\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 417\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"10\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 418\n          },\n          __self: this\n        }, \"10\"), React.createElement(\"option\", {\n          value: \"11\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419\n          },\n          __self: this\n        }, \"11\"), React.createElement(\"option\", {\n          value: \"12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        }, \"12\"), React.createElement(\"option\", {\n          value: \"13\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421\n          },\n          __self: this\n        }, \"13\"), React.createElement(\"option\", {\n          value: \"14\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, \"14\"), React.createElement(\"option\", {\n          value: \"15\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423\n          },\n          __self: this\n        }, \"15\"), React.createElement(\"option\", {\n          value: \"16\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 424\n          },\n          __self: this\n        }, \"16\"), React.createElement(\"option\", {\n          value: \"17\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 425\n          },\n          __self: this\n        }, \"17\"), React.createElement(\"option\", {\n          value: \"18\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, \"18\"), React.createElement(\"option\", {\n          value: \"19\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427\n          },\n          __self: this\n        }, \"19\"), React.createElement(\"option\", {\n          value: \"20\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428\n          },\n          __self: this\n        }, \"20\"), React.createElement(\"option\", {\n          value: \"21\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 429\n          },\n          __self: this\n        }, \"21\"), React.createElement(\"option\", {\n          value: \"22\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 430\n          },\n          __self: this\n        }, \"22\"), React.createElement(\"option\", {\n          value: \"23\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 431\n          },\n          __self: this\n        }, \"23\"), React.createElement(\"option\", {\n          value: \"24\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 432\n          },\n          __self: this\n        }, \"24\"), React.createElement(\"option\", {\n          value: \"25\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 433\n          },\n          __self: this\n        }, \"25\"), React.createElement(\"option\", {\n          value: \"26\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 434\n          },\n          __self: this\n        }, \"26\"), React.createElement(\"option\", {\n          value: \"27\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 435\n          },\n          __self: this\n        }, \"27\"), React.createElement(\"option\", {\n          value: \"28\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 436\n          },\n          __self: this\n        }, \"28\"), React.createElement(\"option\", {\n          value: \"29\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 437\n          },\n          __self: this\n        }, \"29\"), React.createElement(\"option\", {\n          value: \"30\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438\n          },\n          __self: this\n        }, \"30\"), React.createElement(\"option\", {\n          value: \"31\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 439\n          },\n          __self: this\n        }, \"31\"), React.createElement(\"option\", {\n          value: \"32\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440\n          },\n          __self: this\n        }, \"32\"), React.createElement(\"option\", {\n          value: \"33\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 441\n          },\n          __self: this\n        }, \"33\"), React.createElement(\"option\", {\n          value: \"34\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 442\n          },\n          __self: this\n        }, \"34\"), React.createElement(\"option\", {\n          value: \"35\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 443\n          },\n          __self: this\n        }, \"35\"), React.createElement(\"option\", {\n          value: \"36\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 444\n          },\n          __self: this\n        }, \"36\"), React.createElement(\"option\", {\n          value: \"37\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 445\n          },\n          __self: this\n        }, \"37\"), React.createElement(\"option\", {\n          value: \"38\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 446\n          },\n          __self: this\n        }, \"38\"), React.createElement(\"option\", {\n          value: \"39\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 447\n          },\n          __self: this\n        }, \"39\"), React.createElement(\"option\", {\n          value: \"40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448\n          },\n          __self: this\n        }, \"40\"))), React.createElement(\"div\", {\n          className: \"label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 452\n          },\n          __self: this\n        }, \"x\"), React.createElement(\"div\", {\n          className: \"select\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 454\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          value: height,\n          onChange: function onChange(e) {\n            return _this4.setState({\n              height: e.target.value\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 455\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"10\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 456\n          },\n          __self: this\n        }, \"10\"), React.createElement(\"option\", {\n          value: \"11\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457\n          },\n          __self: this\n        }, \"11\"), React.createElement(\"option\", {\n          value: \"12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        }, \"12\"), React.createElement(\"option\", {\n          value: \"13\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459\n          },\n          __self: this\n        }, \"13\"), React.createElement(\"option\", {\n          value: \"14\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460\n          },\n          __self: this\n        }, \"14\"), React.createElement(\"option\", {\n          value: \"15\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, \"15\"), React.createElement(\"option\", {\n          value: \"16\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 462\n          },\n          __self: this\n        }, \"16\"), React.createElement(\"option\", {\n          value: \"17\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 463\n          },\n          __self: this\n        }, \"17\"), React.createElement(\"option\", {\n          value: \"18\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464\n          },\n          __self: this\n        }, \"18\"), React.createElement(\"option\", {\n          value: \"19\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 465\n          },\n          __self: this\n        }, \"19\"), React.createElement(\"option\", {\n          value: \"20\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 466\n          },\n          __self: this\n        }, \"20\"), React.createElement(\"option\", {\n          value: \"21\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 467\n          },\n          __self: this\n        }, \"21\"), React.createElement(\"option\", {\n          value: \"22\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 468\n          },\n          __self: this\n        }, \"22\"), React.createElement(\"option\", {\n          value: \"23\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 469\n          },\n          __self: this\n        }, \"23\"), React.createElement(\"option\", {\n          value: \"24\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 470\n          },\n          __self: this\n        }, \"24\"), React.createElement(\"option\", {\n          value: \"25\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471\n          },\n          __self: this\n        }, \"25\"), React.createElement(\"option\", {\n          value: \"26\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 472\n          },\n          __self: this\n        }, \"26\"), React.createElement(\"option\", {\n          value: \"27\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473\n          },\n          __self: this\n        }, \"27\"), React.createElement(\"option\", {\n          value: \"28\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 474\n          },\n          __self: this\n        }, \"28\"), React.createElement(\"option\", {\n          value: \"29\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475\n          },\n          __self: this\n        }, \"29\"), React.createElement(\"option\", {\n          value: \"30\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 476\n          },\n          __self: this\n        }, \"30\"), React.createElement(\"option\", {\n          value: \"31\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 477\n          },\n          __self: this\n        }, \"31\"), React.createElement(\"option\", {\n          value: \"32\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 478\n          },\n          __self: this\n        }, \"32\"), React.createElement(\"option\", {\n          value: \"33\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 479\n          },\n          __self: this\n        }, \"33\"), React.createElement(\"option\", {\n          value: \"34\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 480\n          },\n          __self: this\n        }, \"34\"), React.createElement(\"option\", {\n          value: \"35\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481\n          },\n          __self: this\n        }, \"35\"), React.createElement(\"option\", {\n          value: \"36\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482\n          },\n          __self: this\n        }, \"36\"), React.createElement(\"option\", {\n          value: \"37\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 483\n          },\n          __self: this\n        }, \"37\"), React.createElement(\"option\", {\n          value: \"38\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 484\n          },\n          __self: this\n        }, \"38\"), React.createElement(\"option\", {\n          value: \"39\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485\n          },\n          __self: this\n        }, \"39\"), React.createElement(\"option\", {\n          value: \"40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486\n          },\n          __self: this\n        }, \"40\"))), React.createElement(\"input\", {\n          value: name,\n          onChange: function onChange(e) {\n            return _this4.setState({\n              name: e.target.value\n            });\n          },\n          type: \"text\",\n          placeholder: \"Pattern Name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490\n          },\n          __self: this\n        }), !user && React.createElement(\"button\", {\n          disabled: true,\n          className: \"save-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 491\n          },\n          __self: this\n        }, \"Sign In To Save\"), user && React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this4.save();\n          },\n          disabled: saving,\n          className: \"save-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 493\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 494\n          },\n          __self: this\n        }, saving ? 'Saving...' : 'Save')))), React.createElement(\"div\", {\n          className: \"grid-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 500\n          },\n          __self: this\n        }, React.createElement(\"canvas\", {\n          onMouseMove: function onMouseMove(e) {\n            return _this4.drag(e);\n          },\n          onClick: function onClick(e) {\n            return _this4.click(e);\n          },\n          onMouseDown: function onMouseDown(e) {\n            return _this4.startDrawing(e);\n          },\n          onMouseLeave: function onMouseLeave(e) {\n            return _this4.stopDrawing(e);\n          },\n          id: \"grid\",\n          ref: _this4.myRefs.grid,\n          width: _this4.canvasWidth,\n          height: _this4.canvasHeight,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 501\n          },\n          __self: this\n        }), React.createElement(\"canvas\", {\n          id: \"preview\",\n          ref: _this4.myRefs.preview,\n          width: _this4.previewWidth,\n          height: _this4.previewHeight,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        })));\n      });\n    }\n  }]);\n\n  return Designer;\n}(Component);\n\nexport default Designer;","map":{"version":3,"sources":["/Users/will/Documents/beader.org/react/src/components/Designer.js"],"names":["React","Component","store","apiPath","UserContext","images","alignPixel","require","alignNormal","alignHorizontal","alignVertical","brush","fill","picker","Designer","props","myRefs","clearColor","colors","hidePaletteTimeout","canvasWidth","canvasHeight","previewWidth","previewHeight","paletteWidth","paletteHeight","paletteCols","paletteRows","state","width","height","previousWidth","previousHeight","name","align","mode","color","drawing","pattern","Array","saving","oldColor","showPalette","palette","createRef","paletteWrapper","saveButton","preview","grid","newPattern","ii","push","jj","setState","initPattern","renderPalette","renderGrid","current","context","getContext","y","x","beginPath","fillStyle","fillRect","strokeStyle","lineWidth","stroke","hidePalette","clearTimeout","delay","setTimeout","el","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","e","hide","offset","getOffset","offsetX","pageX","offsetY","pageY","Math","floor","draw","getXY","nativeEvent","size","centeringOffset","horizontalOffset","verticalOffset","xy","stopDrawing","setPatternCell","getPatternCell","stack","length","cell","pop","canvas","setAttribute","getAttribute","rect","arc","PI","previewContext","step1","createElement","step1Context","clearRect","drawImage","token","get","find","alert","fetch","method","body","JSON","stringify","description","headers","Headers","then","response","json","catch","error","user","editor","setAlign","setMode","backgroundColor","selectColor","resetColor","target","value","save","drag","click","startDrawing"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,WAAT,QAA4B,QAA5B;AAEA,IAAMC,MAAM,GAAG;AACbC,EAAAA,UAAU,EAAEC,OAAO,CAAC,2BAAD,CADN;AAEbC,EAAAA,WAAW,EAAED,OAAO,CAAC,4BAAD,CAFP;AAGbE,EAAAA,eAAe,EAAEF,OAAO,CAAC,gCAAD,CAHX;AAIbG,EAAAA,aAAa,EAAEH,OAAO,CAAC,8BAAD,CAJT;AAKbI,EAAAA,KAAK,EAAEJ,OAAO,CAAC,qBAAD,CALD;AAMbK,EAAAA,IAAI,EAAEL,OAAO,CAAC,oBAAD,CANA;AAObM,EAAAA,MAAM,EAAEN,OAAO,CAAC,sBAAD;AAPF,CAAf;;IAUMO,Q;;;;;AA8BJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;AADiB,UA7BnBC,MA6BmB,GA7BV,EA6BU;AAAA,UA5BnBC,UA4BmB,GA5BN,QA4BM;AAAA,UA3BnBC,MA2BmB,GA3BV,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,EAAmD,QAAnD,EAA6D,QAA7D,EAAuE,QAAvE,EAAiF,QAAjF,EAA2F,QAA3F,EAAqG,QAArG,EAA+G,QAA/G,EAAyH,QAAzH,EAAmI,QAAnI,EAA6I,QAA7I,EAAuJ,QAAvJ,EAAiK,QAAjK,EAA2K,QAA3K,EAAqL,QAArL,EAA+L,QAA/L,EAAyM,QAAzM,EAAmN,QAAnN,EAA6N,QAA7N,EAAuO,QAAvO,EAAiP,QAAjP,EAA2P,QAA3P,EAAqQ,QAArQ,EAA+Q,QAA/Q,EAAyR,QAAzR,EAAmS,QAAnS,EAA6S,QAA7S,EAAuT,QAAvT,EAAiU,QAAjU,EAA2U,QAA3U,EAAqV,QAArV,EAA+V,QAA/V,EAAyW,QAAzW,EAAmX,QAAnX,EAA6X,QAA7X,EAAuY,QAAvY,EAAiZ,QAAjZ,EAA2Z,QAA3Z,EAAqa,QAAra,EAA+a,QAA/a,EAAyb,QAAzb,EAAmc,QAAnc,EAA6c,QAA7c,EAAud,QAAvd,EAAie,QAAje,EAA2e,QAA3e,EAAqf,QAArf,EAA+f,QAA/f,EAAygB,QAAzgB,EAAmhB,QAAnhB,EAA6hB,QAA7hB,EAAuiB,QAAviB,EAAijB,QAAjjB,EAA2jB,QAA3jB,EAAqkB,QAArkB,EAA+kB,QAA/kB,EAAylB,QAAzlB,EAAmmB,QAAnmB,EAA6mB,QAA7mB,EAAunB,QAAvnB,EAAioB,QAAjoB,EAA2oB,QAA3oB,EAAqpB,QAArpB,EAA+pB,QAA/pB,EAAyqB,QAAzqB,EAAmrB,QAAnrB,EAA6rB,QAA7rB,EAAusB,QAAvsB,EAAitB,QAAjtB,EAA2tB,QAA3tB,EAAquB,QAAruB,EAA+uB,QAA/uB,EAAyvB,QAAzvB,EAAmwB,QAAnwB,EAA6wB,QAA7wB,EAAuxB,QAAvxB,EAAiyB,QAAjyB,EAA2yB,QAA3yB,EAAqzB,QAArzB,EAA+zB,QAA/zB,EAAy0B,QAAz0B,EAAm1B,QAAn1B,EAA61B,QAA71B,EAAu2B,QAAv2B,EAAi3B,QAAj3B,EAA23B,QAA33B,EAAq4B,QAAr4B,EAA+4B,QAA/4B,EAAy5B,QAAz5B,EAAm6B,QAAn6B,EAA66B,QAA76B,EAAu7B,QAAv7B,EAAi8B,QAAj8B,EAA28B,QAA38B,EAAq9B,QAAr9B,EAA+9B,QAA/9B,EAAy+B,QAAz+B,EAAm/B,QAAn/B,EAA6/B,QAA7/B,EAAugC,QAAvgC,EAAihC,QAAjhC,EAA2hC,QAA3hC,EAAqiC,QAAriC,EAA+iC,QAA/iC,EAAyjC,QAAzjC,EAAmkC,QAAnkC,EAA6kC,QAA7kC,EAAulC,QAAvlC,EAAimC,QAAjmC,EAA2mC,QAA3mC,EAAqnC,QAArnC,EAA+nC,QAA/nC,EAAyoC,QAAzoC,EAAmpC,QAAnpC,EAA6pC,QAA7pC,EAAuqC,QAAvqC,EAAirC,QAAjrC,EAA2rC,QAA3rC,EAAqsC,QAArsC,EAA+sC,QAA/sC,EAAytC,QAAztC,EAAmuC,QAAnuC,EAA6uC,QAA7uC,EAAuvC,QAAvvC,EAAiwC,QAAjwC,EAA2wC,QAA3wC,EAAqxC,QAArxC,EAA+xC,QAA/xC,EAAyyC,QAAzyC,EAAmzC,QAAnzC,EAA6zC,QAA7zC,EAAu0C,QAAv0C,EAAi1C,QAAj1C,EAA21C,QAA31C,EAAq2C,QAAr2C,EAA+2C,QAA/2C,EAAy3C,QAAz3C,EAAm4C,QAAn4C,EAA64C,QAA74C,EAAu5C,QAAv5C,EAAi6C,QAAj6C,EAA26C,QAA36C,EAAq7C,QAAr7C,EAA+7C,QAA/7C,EAAy8C,QAAz8C,EAAm9C,QAAn9C,EAA69C,QAA79C,EAAu+C,QAAv+C,EAAi/C,QAAj/C,EAA2/C,QAA3/C,EAAqgD,QAArgD,EAA+gD,QAA/gD,EAAyhD,QAAzhD,EAAmiD,QAAniD,EAA6iD,QAA7iD,EAAujD,QAAvjD,EAAikD,QAAjkD,EAA2kD,QAA3kD,EAAqlD,QAArlD,EAA+lD,QAA/lD,EAAymD,QAAzmD,EAAmnD,QAAnnD,EAA6nD,QAA7nD,EAAuoD,QAAvoD,EAAipD,QAAjpD,EAA2pD,QAA3pD,EAAqqD,QAArqD,EAA+qD,QAA/qD,EAAyrD,QAAzrD,EAAmsD,QAAnsD,EAA6sD,QAA7sD,EAAutD,QAAvtD,EAAiuD,QAAjuD,EAA2uD,QAA3uD,EAAqvD,QAArvD,EAA+vD,QAA/vD,EAAywD,QAAzwD,EAAmxD,QAAnxD,EAA6xD,QAA7xD,EAAuyD,QAAvyD,EAAizD,QAAjzD,EAA2zD,QAA3zD,EAAq0D,QAAr0D,EAA+0D,QAA/0D,EAAy1D,QAAz1D,EAAm2D,QAAn2D,EAA62D,QAA72D,EAAu3D,QAAv3D,EAAi4D,QAAj4D,EAA24D,QAA34D,EAAq5D,QAAr5D,EAA+5D,QAA/5D,EAAy6D,QAAz6D,EAAm7D,QAAn7D,EAA67D,QAA77D,EAAu8D,QAAv8D,EAAi9D,QAAj9D,EAA29D,QAA39D,EAAq+D,QAAr+D,EAA++D,QAA/+D,EAAy/D,QAAz/D,EAAmgE,QAAngE,EAA6gE,QAA7gE,EAAuhE,QAAvhE,EAAiiE,QAAjiE,EAA2iE,QAA3iE,EAAqjE,QAArjE,EAA+jE,QAA/jE,EAAykE,QAAzkE,EAAmlE,QAAnlE,EAA6lE,QAA7lE,EAAumE,QAAvmE,EAAinE,QAAjnE,EAA2nE,QAA3nE,EAAqoE,QAAroE,EAA+oE,QAA/oE,EAAypE,QAAzpE,EAAmqE,QAAnqE,EAA6qE,QAA7qE,EAAurE,QAAvrE,EAAisE,QAAjsE,EAA2sE,QAA3sE,EAAqtE,QAArtE,EAA+tE,QAA/tE,EAAyuE,QAAzuE,EAAmvE,QAAnvE,EAA6vE,QAA7vE,EAAuwE,QAAvwE,EAAixE,QAAjxE,EAA2xE,QAA3xE,EAAqyE,QAAryE,EAA+yE,QAA/yE,EAAyzE,QAAzzE,EAAm0E,QAAn0E,EAA60E,QAA70E,EAAu1E,QAAv1E,EAAi2E,QAAj2E,EAA22E,QAA32E,EAAq3E,QAAr3E,EAA+3E,QAA/3E,EAAy4E,QAAz4E,EAAm5E,QAAn5E,EAA65E,QAA75E,EAAu6E,QAAv6E,EAAi7E,QAAj7E,EAA27E,QAA37E,EAAq8E,QAAr8E,EAA+8E,QAA/8E,EAAy9E,QAAz9E,EAAm+E,QAAn+E,EAA6+E,QAA7+E,EAAu/E,QAAv/E,CA2BU;AAAA,UA1BnBC,kBA0BmB,GA1BE,IA0BF;AAAA,UAzBnBC,WAyBmB,GAzBL,GAyBK;AAAA,UAxBnBC,YAwBmB,GAxBJ,GAwBI;AAAA,UAvBnBC,YAuBmB,GAvBJ,GAuBI;AAAA,UAtBnBC,aAsBmB,GAtBH,GAsBG;AAAA,UArBnBC,YAqBmB,GArBJ,GAqBI;AAAA,UApBnBC,aAoBmB,GApBH,GAoBG;AAAA,UAnBnBC,WAmBmB,GAnBL,EAmBK;AAAA,UAlBnBC,WAkBmB,GAlBL,EAkBK;AAAA,UAhBnBC,KAgBmB,GAhBX;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,MAAM,EAAE,EAFF;AAGNC,MAAAA,aAAa,EAAE,EAHT;AAINC,MAAAA,cAAc,EAAE,EAJV;AAKNC,MAAAA,IAAI,EAAE,kBALA;AAMNC,MAAAA,KAAK,EAAE,QAND;AAONC,MAAAA,IAAI,EAAE,OAPA;AAQNC,MAAAA,KAAK,EAAE,QARD;AASNC,MAAAA,OAAO,EAAE,KATH;AAUNC,MAAAA,OAAO,EAAG,IAAIC,KAAJ,CAAU,GAAV,CAAD,CAAiB3B,IAAjB,CAAsB,QAAtB,CAVH;AAWN4B,MAAAA,MAAM,EAAE,KAXF;AAYNC,MAAAA,QAAQ,EAAE,QAZJ;AAaNC,MAAAA,WAAW,EAAE;AAbP,KAgBW;AAGjB,UAAK1B,MAAL,GAAc;AACZ2B,MAAAA,OAAO,EAAE3C,KAAK,CAAC4C,SAAN,EADG;AAEZC,MAAAA,cAAc,EAAE7C,KAAK,CAAC4C,SAAN,EAFJ;AAGZR,MAAAA,KAAK,EAAEpC,KAAK,CAAC4C,SAAN,EAHK;AAIZE,MAAAA,UAAU,EAAE9C,KAAK,CAAC4C,SAAN,EAJA;AAKZG,MAAAA,OAAO,EAAE/C,KAAK,CAAC4C,SAAN,EALG;AAMZI,MAAAA,IAAI,EAAEhD,KAAK,CAAC4C,SAAN;AANM,KAAd;AAHiB;AAWlB;;;;kCAEa;AACZ,UAAIK,UAAU,GAAG,EAAjB,CADY,CAGZ;;AAEA,WAAI,IAAIC,EAAE,GAAG,CAAb,EAAgBA,EAAE,GAAG,KAAKtB,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWE,MAAnD,EAA2DoB,EAAE,EAA7D,EAAgE;AAC9DD,QAAAA,UAAU,CAACE,IAAX,CAAgB,KAAKlC,UAArB;AACD,OAPW,CASZ;;;AAEA,WAAI,IAAIiC,GAAE,GAAG,CAAb,EAAgBA,GAAE,GAAG,KAAKtB,KAAL,CAAWG,aAAhC,EAA+CmB,GAAE,EAAjD,EAAoD;AAClD,YAAGA,GAAE,IAAI,KAAKtB,KAAL,CAAWC,KAApB,EAA2B;;AAC3B,aAAI,IAAIuB,EAAE,GAAG,CAAb,EAAgBA,EAAE,GAAG,KAAKxB,KAAL,CAAWI,cAAhC,EAAgDoB,EAAE,EAAlD,EAAqD;AACnD,cAAGA,EAAE,IAAI,KAAKxB,KAAL,CAAWE,MAApB,EAA4B;AAC5BmB,UAAAA,UAAU,CAACC,GAAE,GAAGE,EAAE,GAAG,KAAKxB,KAAL,CAAWC,KAAtB,CAAV,GAAyC,KAAKD,KAAL,CAAWU,OAAX,CAAmBY,GAAE,GAAGE,EAAE,GAAG,KAAKxB,KAAL,CAAWG,aAAxC,CAAzC;AACD;AACF;;AAED,WAAKsB,QAAL,CAAc;AACZf,QAAAA,OAAO,EAAEW,UADG;AAEZ3B,QAAAA,YAAY,EAAE,KAAKM,KAAL,CAAWC,KAFb;AAGZG,QAAAA,cAAc,EAAE,KAAKJ,KAAL,CAAWE;AAHf,OAAd;AAKD;;;wCAEmB;AAClB,WAAKwB,WAAL,GADkB,CAElB;;AACA,WAAKC,aAAL;AACD;;;yCAEoB;AACnB,WAAKC,UAAL;AACD;;;oCAEe;AACd,UAAIb,OAAO,GAAG,KAAK3B,MAAL,CAAY2B,OAAZ,CAAoBc,OAAlC;AACA,UAAIC,OAAO,GAAGf,OAAO,CAACgB,UAAR,CAAmB,IAAnB,CAAd;AAEA,UAAI9B,KAAK,GAAG,CAAC,KAAKL,YAAL,GAAoB,CAArB,IAA0B,KAAKE,WAA/B,GAA6C,CAAzD;AACA,UAAII,MAAM,GAAG,CAAC,KAAKL,aAAL,GAAqB,CAAtB,IAA2B,KAAKE,WAAhC,GAA8C,CAA3D;;AAEA,WAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjC,WAAzB,EAAsCiC,CAAC,EAAvC,EAA2C;AACzC,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKnC,WAAzB,EAAsCmC,CAAC,EAAvC,EAA2C;AACzCH,UAAAA,OAAO,CAACI,SAAR;AACAJ,UAAAA,OAAO,CAACK,SAAR,GAAoB,MAAM,KAAK7C,MAAL,CAAY0C,CAAC,GAAG,KAAKlC,WAAT,GAAuBmC,CAAnC,CAA1B;AACAH,UAAAA,OAAO,CAACM,QAAR,CAAiBH,CAAC,IAAIhC,KAAK,GAAG,CAAZ,CAAlB,EAAkC+B,CAAC,IAAI9B,MAAM,GAAG,CAAb,CAAnC,EAAoDD,KAApD,EAA2DC,MAA3D;AACA4B,UAAAA,OAAO,CAACO,WAAR,GAAsB,SAAtB;AACAP,UAAAA,OAAO,CAACQ,SAAR,GAAoB,CAApB;AACAR,UAAAA,OAAO,CAACS,MAAR;AACD;AACF;;AAED,WAAKC,WAAL;AACD;;;kCAEa;AACZ,WAAKf,QAAL,CAAc;AAACZ,QAAAA,QAAQ,EAAE,KAAKb,KAAL,CAAWQ,KAAtB;AAA6BM,QAAAA,WAAW,EAAE;AAA1C,OAAd;AACA2B,MAAAA,YAAY,CAAC,KAAKlD,kBAAN,CAAZ;AACD;;;kCAEsB;AAAA;;AAAA,UAAXmD,KAAW,uEAAH,CAAG;AACrB,WAAKnD,kBAAL,GAA0BoD,UAAU,CAAC,YAAM;AACzC,QAAA,MAAI,CAAClB,QAAL,CAAc;AAACX,UAAAA,WAAW,EAAE;AAAd,SAAd;AACD,OAFmC,EAEjC4B,KAFiC,CAApC;AAGD;;;8BAESE,E,EAAI;AACZ,UAAMC,GAAG,GAAGD,EAAE,CAACE,qBAAH,EAAZ;AAEA,aAAO;AACLC,QAAAA,GAAG,EAAEF,GAAG,CAACE,GAAJ,GAAUC,MAAM,CAACC,WAAjB,GAA+BC,QAAQ,CAACC,eAAT,CAAyBC,SADxD;AAELC,QAAAA,IAAI,EAAER,GAAG,CAACQ,IAAJ,GAAWL,MAAM,CAACM,WAAlB,GAAgCJ,QAAQ,CAACC,eAAT,CAAyBI;AAF1D,OAAP;AAIH;;;iCAEc;AACX,WAAK9B,QAAL,CAAc;AAACjB,QAAAA,KAAK,EAAE,KAAKR,KAAL,CAAWa;AAAnB,OAAd;AACD;;;gCAEW2C,C,EAAiB;AAAA,UAAdC,IAAc,uEAAP,KAAO;AAC3B,UAAM1C,OAAO,GAAG,KAAK3B,MAAL,CAAY2B,OAAZ,CAAoBc,OAApC;AACA,UAAM5B,KAAK,GAAG,KAAKL,YAAL,GAAoB,KAAKE,WAAvC;AACA,UAAMI,MAAM,GAAG,KAAKL,aAAL,GAAqB,KAAKE,WAAzC;AACA,UAAM2D,MAAM,GAAG,KAAKC,SAAL,CAAe5C,OAAf,CAAf;AACA,UAAM6C,OAAO,GAAGJ,CAAC,CAACK,KAAF,GAAUH,MAAM,CAACL,IAAjC;AACA,UAAMS,OAAO,GAAGN,CAAC,CAACO,KAAF,GAAUL,MAAM,CAACX,GAAjC;AACA,UAAMd,CAAC,GAAG+B,IAAI,CAACC,KAAL,CAAWL,OAAO,GAAG3D,KAArB,CAAV;AACA,UAAM+B,CAAC,GAAGgC,IAAI,CAACC,KAAL,CAAWH,OAAO,GAAG5D,MAArB,CAAV;AAEA,WAAKuB,QAAL,CAAc;AAACjB,QAAAA,KAAK,EAAE,KAAKlB,MAAL,CAAY0C,CAAC,GAAG,KAAKlC,WAAT,GAAuBmC,CAAnC;AAAR,OAAd;;AAEA,UAAGwB,IAAH,EAAQ;AACN,aAAKjB,WAAL;AACA,aAAKf,QAAL,CAAc;AAACZ,UAAAA,QAAQ,EAAE,KAAKb,KAAL,CAAWQ;AAAtB,SAAd;AACD;AACF;;;4BAEOD,I,EAAM;AACZ,WAAKkB,QAAL,CAAc;AAAClB,QAAAA,IAAI,EAAJA;AAAD,OAAd;AACD;;;6BAEQD,K,EAAO;AACd,WAAKmB,QAAL,CAAc;AAACnB,QAAAA,KAAK,EAALA;AAAD,OAAd,EADc,CAEd;AACD;;;mCAEc;AACb,WAAKmB,QAAL,CAAc;AAAChB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACD;;;kCAEa;AACZ,WAAKgB,QAAL,CAAc;AAAChB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACD;;;yBAEI+C,C,EAAG;AACN,UAAI,KAAKxD,KAAL,CAAWS,OAAX,IAAsB,KAAKT,KAAL,CAAWO,IAAX,KAAoB,OAA9C,EAAuD;AACrD,aAAK2D,IAAL,gCAAa,KAAKC,KAAL,CAAWX,CAAX,CAAb;AACD;AACF;;;0BAEKA,C,EAAG;AACPA,MAAAA,CAAC,GAAGA,CAAC,CAACY,WAAN;AACA,UAAIC,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWE,MAA9B,GAAuC,KAAKV,WAAL,GAAmB,KAAKQ,KAAL,CAAWC,KAArE,GAA6E,KAAKR,YAAL,GAAoB,KAAKO,KAAL,CAAWE,MAAvH;;AAEA,UAAI,KAAKF,KAAL,CAAWM,KAAX,KAAqB,QAArB,IAAiC,KAAKN,KAAL,CAAWM,KAAX,KAAqB,OAA1D,EAAmE;AACjE+D,QAAAA,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWE,MAA9B,GAAuCmE,IAAI,GAAGA,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAlB,GAA0B,CAAxE,GAA4EoE,IAAI,GAAGA,IAAI,GAAG,KAAKrE,KAAL,CAAWE,MAAlB,GAA2B,CAArH;AACD;;AAED,UAAI+B,CAAJ,EAAOD,CAAP;AACA,UAAIsC,eAAe,GAAG,CAAC,KAAK9E,WAAL,GAAmB6E,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAtC,IAA+C,CAArE;;AAEA,UAAG,KAAKD,KAAL,CAAWM,KAAX,KAAqB,YAAxB,EAAqC;AACnC0B,QAAAA,CAAC,GAAGgC,IAAI,CAACC,KAAL,CAAWT,CAAC,CAACM,OAAF,GAAYO,IAAvB,CAAJ;AACA,YAAIE,gBAAgB,GAAG,EAAEvC,CAAC,GAAG,CAAN,IAAWqC,IAAI,GAAG,CAAlB,GAAsB,CAA7C;AACAC,QAAAA,eAAe,IAAID,IAAI,GAAG,CAA1B;AACApC,QAAAA,CAAC,GAAG+B,IAAI,CAACC,KAAL,CAAW,CAACT,CAAC,CAACI,OAAF,GAAYU,eAAZ,GAA8BC,gBAA/B,IAAmDF,IAA9D,CAAJ;AACD;;AAED,UAAG,KAAKrE,KAAL,CAAWM,KAAX,KAAqB,UAAxB,EAAmC;AACjC2B,QAAAA,CAAC,GAAG+B,IAAI,CAACC,KAAL,CAAW,CAACT,CAAC,CAACI,OAAF,GAAYU,eAAb,IAAgCD,IAA3C,CAAJ;AACA,YAAIG,cAAc,GAAIvC,CAAC,GAAG,CAAL,GAAUoC,IAAI,GAAG,CAAjB,GAAqB,CAA1C;AACArC,QAAAA,CAAC,GAAGgC,IAAI,CAACC,KAAL,CAAW,CAACT,CAAC,CAACM,OAAF,GAAYU,cAAb,IAA+BH,IAA1C,CAAJ;AACD;;AAED,UAAG,KAAKrE,KAAL,CAAWM,KAAX,KAAqB,QAArB,IAAiC,KAAKN,KAAL,CAAWM,KAAX,KAAqB,OAAzD,EAAiE;AAC/D2B,QAAAA,CAAC,GAAG+B,IAAI,CAACC,KAAL,CAAW,CAACT,CAAC,CAACI,OAAF,GAAYU,eAAb,IAAgCD,IAA3C,CAAJ;AACArC,QAAAA,CAAC,GAAGgC,IAAI,CAACC,KAAL,CAAWT,CAAC,CAACM,OAAF,GAAYO,IAAvB,CAAJ;AACD;;AAED,aAAO,CAACpC,CAAD,EAAID,CAAJ,CAAP;AACD;;;0BAEKwB,C,EAAG;AACP,UAAI,KAAKxD,KAAL,CAAWO,IAAX,KAAoB,OAAxB,EAAiC;AAC/B,YAAMkE,EAAE,GAAG,KAAKN,KAAL,CAAWX,CAAX,CAAX;AAEA,aAAKkB,WAAL,CAAiBlB,CAAjB;AACA,aAAKU,IAAL,gCAAaO,EAAb;AACD;;AAED,UAAI,KAAKzE,KAAL,CAAWO,IAAX,KAAoB,MAAxB,EAAgC;AAC9B,aAAKvB,IAAL,gCAAa,KAAKmF,KAAL,CAAWX,CAAX,CAAb;AACD;AACF;;;mCAEcvB,C,EAAGD,C,EAAG;AACnB,aAAO,KAAKhC,KAAL,CAAWU,OAAX,CAAmBuB,CAAC,GAAGD,CAAC,GAAG,KAAKhC,KAAL,CAAWC,KAAtC,CAAP;AACD;;;mCAEcgC,C,EAAGD,C,EAAGxB,K,EAAO;AAC1B,UAAME,OAAO,GAAG,KAAKV,KAAL,CAAWU,OAA3B;AACAA,MAAAA,OAAO,CAACuB,CAAC,GAAGD,CAAC,GAAG,KAAKhC,KAAL,CAAWC,KAApB,CAAP,GAAoCO,KAApC;AACA,WAAKiB,QAAL,CAAc;AAACf,QAAAA,OAAO,EAAPA;AAAD,OAAd;AACD;;;yBAEIuB,C,EAAGD,C,EAAG;AACT,WAAK2C,cAAL,CAAoB1C,CAApB,EAAuBD,CAAvB,EAA0B,KAAKhC,KAAL,CAAWQ,KAArC,EADS,CAET;AACD;;;yBAEIyB,C,EAAGD,C,EAAG;AACT,UAAMnB,QAAQ,GAAG,KAAK+D,cAAL,CAAoB3C,CAApB,EAAuBD,CAAvB,KAA6B,KAAK3C,UAAnD;AACA,UAAIwB,QAAQ,KAAK,KAAKb,KAAL,CAAWQ,KAA5B,EAAmC;AAEnC,UAAIqE,KAAK,GAAG,CACV,CAAC5C,CAAD,EAAID,CAAJ,CADU,CAAZ;;AAIA,aAAO6C,KAAK,CAACC,MAAb,EAAqB;AACnB,YAAMC,IAAI,GAAGF,KAAK,CAACG,GAAN,EAAb;AACA,YAAM/C,EAAC,GAAG8C,IAAI,CAAC,CAAD,CAAd;AACA,YAAM/C,EAAC,GAAG+C,IAAI,CAAC,CAAD,CAAd;AAEA,aAAKJ,cAAL,CAAoB1C,EAApB,EAAuBD,EAAvB,EAA0B,KAAKhC,KAAL,CAAWQ,KAArC;AAEA,YAAIyB,EAAC,GAAG,CAAJ,IAAS,CAAT,IAAcpB,QAAQ,MAAM,KAAK+D,cAAL,CAAoB3C,EAAC,GAAG,CAAxB,EAA2BD,EAA3B,KAAiC,QAAvC,CAA1B,EACE6C,KAAK,CAACtD,IAAN,CAAW,CAACU,EAAC,GAAG,CAAL,EAAQD,EAAR,CAAX;AAEF,YAAIC,EAAC,GAAG,CAAJ,GAAQ,KAAKjC,KAAL,CAAWC,KAAnB,IAA4BY,QAAQ,MAAM,KAAK+D,cAAL,CAAoB3C,EAAC,GAAG,CAAxB,EAA2BD,EAA3B,KAAiC,QAAvC,CAAxC,EACE6C,KAAK,CAACtD,IAAN,CAAW,CAACU,EAAC,GAAG,CAAL,EAAQD,EAAR,CAAX;AAEF,YAAIA,EAAC,GAAG,CAAJ,IAAS,CAAT,IAAcnB,QAAQ,MAAM,KAAK+D,cAAL,CAAoB3C,EAApB,EAAuBD,EAAC,GAAG,CAA3B,KAAiC,QAAvC,CAA1B,EACE6C,KAAK,CAACtD,IAAN,CAAW,CAACU,EAAD,EAAID,EAAC,GAAG,CAAR,CAAX;AAEF,YAAIA,EAAC,GAAG,CAAJ,GAAQ,KAAKhC,KAAL,CAAWE,MAAnB,IAA6BW,QAAQ,MAAM,KAAK+D,cAAL,CAAoB3C,EAApB,EAAuBD,EAAC,GAAG,CAA3B,KAAiC,QAAvC,CAAzC,EACE6C,KAAK,CAACtD,IAAN,CAAW,CAACU,EAAD,EAAID,EAAC,GAAG,CAAR,CAAX;AACH,OA1BQ,CA4BT;;AACD;;;iCAEY;AACX,UAAMiD,MAAM,GAAG,KAAK7F,MAAL,CAAYgC,IAAZ,CAAiBS,OAAhC;AACA,UAAMC,OAAO,GAAGmD,MAAM,CAAClD,UAAP,CAAkB,IAAlB,CAAhB;AAEA,UAAIsC,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWE,MAA9B,GAAuC,KAAKV,WAAL,GAAmB,KAAKQ,KAAL,CAAWC,KAArE,GAA6E,KAAKR,YAAL,GAAoB,KAAKO,KAAL,CAAWE,MAAvH;;AAEA,UAAI,KAAKF,KAAL,CAAWM,KAAX,KAAqB,QAArB,IAAiC,KAAKN,KAAL,CAAWM,KAAX,KAAqB,OAA1D,EAAmE;AACjE+D,QAAAA,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWE,MAA9B,GAAuCmE,IAAI,GAAGA,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAAlB,GAA0B,CAAxE,GAA4EoE,IAAI,GAAGA,IAAI,GAAG,KAAKrE,KAAL,CAAWE,MAAlB,GAA2B,CAArH;AACD;;AAED,UAAMqE,gBAAgB,GAAG,KAAKvE,KAAL,CAAWM,KAAX,KAAqB,YAArB,GAAoC+D,IAAI,GAAG,CAA3C,GAA8C,CAAvE;AACA,UAAMG,cAAc,GAAG,KAAKxE,KAAL,CAAWM,KAAX,KAAqB,UAArB,GAAkC+D,IAAI,GAAG,CAAzC,GAA6C,CAApE;AACA,UAAMC,eAAe,GAAG,CAAC,KAAK9E,WAAL,GAAmB6E,IAAI,GAAG,KAAKrE,KAAL,CAAWC,KAArC,GAA6CsE,gBAA9C,IAAkE,CAA1F;AAEAU,MAAAA,MAAM,CAACC,YAAP,CAAoB,OAApB,EAA6BD,MAAM,CAACE,YAAP,CAAoB,OAApB,CAA7B,EAdW,CAciD;;AAE5D,WAAK,IAAIlD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjC,KAAL,CAAWC,KAA/B,EAAsCgC,CAAC,EAAvC,EAA2C;AACzC,aAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhC,KAAL,CAAWE,MAA/B,EAAuC8B,CAAC,EAAxC,EAA4C;AAC1CF,UAAAA,OAAO,CAACI,SAAR;;AAEA,cAAG,KAAKlC,KAAL,CAAWM,KAAX,KAAqB,OAAxB,EAAgC;AAC9BwB,YAAAA,OAAO,CAACsD,IAAR,CAAanD,CAAC,GAAGoC,IAAJ,GAAWC,eAAxB,EAAyCtC,CAAC,GAAGqC,IAA7C,EAAmDA,IAAnD,EAAyDA,IAAzD;AACD,WAFD,MAEK;AACHvC,YAAAA,OAAO,CAACuD,GAAR,CAAYpD,CAAC,GAAGoC,IAAJ,GAAWA,IAAI,GAAG,CAAlB,IAAuB,EAAErC,CAAC,GAAG,CAAN,IAAWuC,gBAAX,GAA8B,CAArD,IAA0DD,eAAtE,EAAuFtC,CAAC,GAAGqC,IAAJ,GAAWA,IAAI,GAAG,CAAlB,IAAuBpC,CAAC,GAAG,CAAJ,GAAQuC,cAAR,GAAyB,CAAhD,CAAvF,EAA2IH,IAAI,GAAG,CAAP,GAAW,CAAtJ,EAAyJ,CAAzJ,EAA4J,IAAIL,IAAI,CAACsB,EAArK,EAAyK,KAAzK;AACD;;AAEDxD,UAAAA,OAAO,CAACK,SAAR,GAAoB,OAAO,KAAKyC,cAAL,CAAoB3C,CAApB,EAAuBD,CAAvB,KAA6B,KAAK3C,UAAzC,CAApB;AACAyC,UAAAA,OAAO,CAAC9C,IAAR;AACA8C,UAAAA,OAAO,CAACQ,SAAR,GAAoB,CAApB;AACAR,UAAAA,OAAO,CAACO,WAAR,GAAsB,MAAtB;AACAP,UAAAA,OAAO,CAACS,MAAR;AACD;AACF,OAhCU,CAkCX;AACA;AACA;AACA;;;AAEA,UAAMpB,OAAO,GAAG,KAAK/B,MAAL,CAAY+B,OAAZ,CAAoBU,OAApC;AACA,UAAM0D,cAAc,GAAGpE,OAAO,CAACY,UAAR,CAAmB,IAAnB,CAAvB;AACA,UAAMyD,KAAK,GAAGtC,QAAQ,CAACuC,aAAT,CAAuB,QAAvB,CAAd;AACA,UAAMC,YAAY,GAAGF,KAAK,CAACzD,UAAN,CAAiB,IAAjB,CAArB;AAEAyD,MAAAA,KAAK,CAACvF,KAAN,GAAc,KAAKT,WAAL,GAAmB,CAAjC;AACAgG,MAAAA,KAAK,CAACtF,MAAN,GAAe,KAAKT,YAAL,GAAoB,CAAnC;AAEAiG,MAAAA,YAAY,CAACC,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6BH,KAAK,CAACvF,KAAnC,EAA0CuF,KAAK,CAACtF,MAAhD;AACAwF,MAAAA,YAAY,CAACE,SAAb,CAAuB9D,OAAO,CAACmD,MAA/B,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,KAAKzF,WAAlD,EAA+D,KAAKC,YAApE,EAAkF,CAAlF,EAAqF,CAArF,EAAwF+F,KAAK,CAACvF,KAA9F,EAAqGuF,KAAK,CAACtF,MAA3G;AAEAqF,MAAAA,cAAc,CAACI,SAAf,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,KAAKjG,YAApC,EAAkD,KAAKC,aAAvD;AACA4F,MAAAA,cAAc,CAACK,SAAf,CAAyBJ,KAAzB,EAAgC,CAAhC,EAAmC,CAAnC,EAAsCA,KAAK,CAACvF,KAA5C,EAAmDuF,KAAK,CAACtF,MAAzD,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,KAAKR,YAA5E,EAA0F,KAAKC,aAA/F;AACD;;;2BAEM;AAAA;;AACL,UAAMkG,KAAK,GAAGvH,KAAK,CAACwH,GAAN,CAAU,OAAV,CAAd;AACA,WAAKrE,QAAL,CAAc;AAACb,QAAAA,MAAM,EAAE;AAAT,OAAd;;AAEA,UAAG,CAAC,KAAKZ,KAAL,CAAWU,OAAX,CAAmBqF,IAAnB,CAAwB,UAAAhB,IAAI,EAAI;AAClC,eAAOA,IAAI,KAAK,MAAI,CAAC/E,KAAL,CAAWU,OAAX,CAAmB,CAAnB,CAAhB;AACD,OAFG,CAAJ,EAEG;AACD,aAAKe,QAAL,CAAc;AAACb,UAAAA,MAAM,EAAE;AAAT,SAAd;AACA,eAAOoF,KAAK,CAAC,wCAAD,CAAZ;AACD;;AAEDC,MAAAA,KAAK,WAAI1H,OAAJ,gBAAwB;AAC3B2H,QAAAA,MAAM,EAAE,MADmB;AAE3BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBhG,UAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWK,IADE;AAEnBiG,UAAAA,WAAW,EAAE,EAFM;AAGnBrG,UAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KAHC;AAInBC,UAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWE,MAJA;AAKnBI,UAAAA,KAAK,EAAE,KAAKN,KAAL,CAAWM,KALC;AAMnBI,UAAAA,OAAO,EAAE,KAAKV,KAAL,CAAWU;AAND,SAAf,CAFqB;AAU3B6F,QAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,4CAA2BX,KAA3B,CADmB;AAEnB,0BAAiB;AAFE,SAAZ;AAVkB,OAAxB,CAAL,CAeCY,IAfD,CAeM,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,OAfd,EAgBCF,IAhBD,CAgBM,UAAAC,QAAQ,EAAI;AAChB,QAAA,MAAI,CAACjF,QAAL,CAAc;AAACb,UAAAA,MAAM,EAAE;AAAT,SAAd,EADgB,CAEhB;;AACD,OAnBD,EAoBCgG,KApBD,CAoBO,UAAAC,KAAK,EAAI;AACdb,QAAAA,KAAK,CAAC,YAAYa,KAAb,CAAL;;AACA,QAAA,MAAI,CAACpF,QAAL,CAAc;AAACb,UAAAA,MAAM,EAAE;AAAT,SAAd;AACD,OAvBD;AAwBD;;;6BAEQ;AAAA;;AAAA,wBACoD,KAAKZ,KADzD;AAAA,UACAQ,KADA,eACAA,KADA;AAAA,UACOF,KADP,eACOA,KADP;AAAA,UACeL,KADf,eACeA,KADf;AAAA,UACsBC,MADtB,eACsBA,MADtB;AAAA,UAC8BG,IAD9B,eAC8BA,IAD9B;AAAA,UACoCO,MADpC,eACoCA,MADpC;AAAA,UAC4CL,IAD5C,eAC4CA,IAD5C;AAAA,UAEAX,YAFA,GAE+B,IAF/B,CAEAA,YAFA;AAAA,UAEcC,aAFd,GAE+B,IAF/B,CAEcA,aAFd;AAIP,aACE,oBAAC,WAAD,CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAuB,UAAAiH,IAAI;AAAA,eACzB;AAAK,UAAA,EAAE,EAAC,QAAR;AAAiB,UAAA,GAAG,EAAE,MAAI,CAAC1H,MAAL,CAAY2H,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAEzG,KAAK,KAAK,OAAV,GAAoB,QAApB,GAA+B,EAAlD;AAAsD,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC0G,QAAL,CAAc,OAAd,CAAN;AAAA,WAA/D;AAA6F,UAAA,EAAE,EAAC,aAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAEvI,MAAM,CAACC,UAAjB;AAA6B,UAAA,KAAK,EAAC,IAAnC;AAAwC,UAAA,MAAM,EAAC,IAA/C;AAAoD,UAAA,GAAG,EAAC,aAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,EAIE;AAAQ,UAAA,SAAS,EAAE4B,KAAK,KAAK,QAAV,GAAqB,QAArB,GAAgC,EAAnD;AAAuD,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC0G,QAAL,CAAc,QAAd,CAAN;AAAA,WAAhE;AAA+F,UAAA,EAAE,EAAC,cAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAEvI,MAAM,CAACG,WAAjB;AAA8B,UAAA,KAAK,EAAC,IAApC;AAAyC,UAAA,MAAM,EAAC,IAAhD;AAAqD,UAAA,GAAG,EAAC,cAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAJF,EAOE;AAAQ,UAAA,SAAS,EAAE0B,KAAK,KAAK,YAAV,GAAyB,QAAzB,GAAoC,EAAvD;AAA2D,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC0G,QAAL,CAAc,YAAd,CAAN;AAAA,WAApE;AAAuG,UAAA,EAAE,EAAC,kBAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAEvI,MAAM,CAACI,eAAjB;AAAkC,UAAA,KAAK,EAAC,IAAxC;AAA6C,UAAA,MAAM,EAAC,IAApD;AAAyD,UAAA,GAAG,EAAC,kBAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAPF,EAUE;AAAQ,UAAA,SAAS,EAAEyB,KAAK,KAAK,UAAV,GAAuB,QAAvB,GAAkC,EAArD;AAAyD,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC0G,QAAL,CAAc,UAAd,CAAN;AAAA,WAAlE;AAAmG,UAAA,EAAE,EAAC,gBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAEvI,MAAM,CAACK,aAAjB;AAAgC,UAAA,KAAK,EAAC,IAAtC;AAA2C,UAAA,MAAM,EAAC,IAAlD;AAAuD,UAAA,GAAG,EAAC,gBAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAVF,CADJ,EAgBI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAEyB,IAAI,KAAK,OAAT,GAAmB,QAAnB,GAA8B,EAAjD;AAAqD,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC0G,OAAL,CAAa,OAAb,CAAN;AAAA,WAA9D;AAA2F,UAAA,EAAE,EAAC,YAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAExI,MAAM,CAACM,KAAjB;AAAwB,UAAA,KAAK,EAAC,IAA9B;AAAmC,UAAA,MAAM,EAAC,IAA1C;AAA+C,UAAA,GAAG,EAAC,YAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,EAIE;AAAQ,UAAA,SAAS,EAAEwB,IAAI,KAAK,MAAT,GAAkB,QAAlB,GAA6B,EAAhD;AAAoD,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC0G,OAAL,CAAa,MAAb,CAAN;AAAA,WAA7D;AAAyF,UAAA,EAAE,EAAC,WAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAExI,MAAM,CAACO,IAAjB;AAAuB,UAAA,KAAK,EAAC,IAA7B;AAAkC,UAAA,MAAM,EAAC,IAAzC;AAA8C,UAAA,GAAG,EAAC,WAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAJF,CAhBJ,EAyBI;AAAK,UAAA,SAAS,EAAC,0CAAf;AAA0D,UAAA,WAAW,EAAE;AAAA,mBAAM,MAAI,CAAC8B,WAAL,EAAN;AAAA,WAAvE;AAAiG,UAAA,YAAY,EAAE;AAAA,mBAAM,MAAI,CAAC0B,WAAL,CAAiB,GAAjB,CAAN;AAAA,WAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,EAAE,EAAC,OAAX;AAAmB,UAAA,KAAK,EAAE;AAAC0E,YAAAA,eAAe,aAAM1G,KAAN;AAAhB,WAA1B;AAA0D,UAAA,GAAG,EAAE,MAAI,CAACpB,MAAL,CAAYoB,KAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAE/B,MAAM,CAACQ,MAAjB;AAAyB,UAAA,KAAK,EAAC,IAA/B;AAAoC,UAAA,MAAM,EAAC,IAA3C;AAAgD,UAAA,GAAG,EAAC,aAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,EAKE;AAAK,UAAA,EAAE,EAAC,iBAAR;AAA0B,UAAA,SAAS,EAAE,MAAI,CAACe,KAAL,CAAWc,WAAX,GAAyB,MAAzB,GAAkC,EAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,OAAO,EAAE,iBAAA0C,CAAC;AAAA,mBAAI,MAAI,CAAC2D,WAAL,CAAiB3D,CAAjB,EAAoB,IAApB,CAAJ;AAAA,WADZ;AAEE,UAAA,WAAW,EAAE,qBAAAA,CAAC;AAAA,mBAAI,MAAI,CAAC2D,WAAL,CAAiB3D,CAAjB,CAAJ;AAAA,WAFhB;AAGE,UAAA,WAAW,EAAE,qBAAAA,CAAC;AAAA,mBAAI,MAAI,CAAC2D,WAAL,CAAiB3D,CAAjB,EAAoB,IAApB,CAAJ;AAAA,WAHhB;AAIE,UAAA,YAAY,EAAE;AAAA,mBAAM,MAAI,CAAC4D,UAAL,EAAN;AAAA,WAJhB;AAKE,UAAA,EAAE,EAAC,SALL;AAME,UAAA,GAAG,EAAE,MAAI,CAAChI,MAAL,CAAY2B,OANnB;AAOE,UAAA,KAAK,EAAEnB,YAPT;AAQE,UAAA,MAAM,EAAEC,aARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CALF,CAzBJ,EA4CI;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,KAAK,EAAEI,KAAf;AAAsB,UAAA,QAAQ,EAAE,kBAAAuD,CAAC;AAAA,mBAAI,MAAI,CAAC/B,QAAL,CAAc;AAACxB,cAAAA,KAAK,EAAEuD,CAAC,CAAC6D,MAAF,CAASC;AAAjB,aAAd,CAAJ;AAAA,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,EAIE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,EAKE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,EAME;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF,EAOE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,EAQE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,EASE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF,EAUE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF,EAWE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,EAYE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF,EAaE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,EAcE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAdF,EAeE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfF,EAgBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhBF,EAiBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjBF,EAkBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBF,EAmBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBF,EAoBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApBF,EAqBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBF,EAsBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBF,EAuBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBF,EAwBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxBF,EAyBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBF,EA0BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1BF,EA2BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3BF,EA4BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5BF,EA6BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7BF,EA8BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9BF,EA+BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BF,CADF,CADF,EAqCE;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eArCF,EAuCE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,KAAK,EAAEpH,MAAf;AAAuB,UAAA,QAAQ,EAAE,kBAAAsD,CAAC;AAAA,mBAAI,MAAI,CAAC/B,QAAL,CAAc;AAACvB,cAAAA,MAAM,EAAEsD,CAAC,CAAC6D,MAAF,CAASC;AAAlB,aAAd,CAAJ;AAAA,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,EAIE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,EAKE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,EAME;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF,EAOE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,EAQE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,EASE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF,EAUE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF,EAWE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,EAYE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF,EAaE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,EAcE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAdF,EAeE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfF,EAgBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhBF,EAiBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjBF,EAkBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBF,EAmBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBF,EAoBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApBF,EAqBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBF,EAsBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBF,EAuBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBF,EAwBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxBF,EAyBE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBF,EA0BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1BF,EA2BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3BF,EA4BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5BF,EA6BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7BF,EA8BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9BF,EA+BE;AAAQ,UAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BF,CADF,CAvCF,EA2EE;AAAO,UAAA,KAAK,EAAEjH,IAAd;AAAoB,UAAA,QAAQ,EAAE,kBAAAmD,CAAC;AAAA,mBAAI,MAAI,CAAC/B,QAAL,CAAc;AAACpB,cAAAA,IAAI,EAAEmD,CAAC,CAAC6D,MAAF,CAASC;AAAhB,aAAd,CAAJ;AAAA,WAA/B;AAA0E,UAAA,IAAI,EAAC,MAA/E;AAAsF,UAAA,WAAW,EAAC,cAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA3EF,EA4EG,CAACR,IAAD,IAAS;AAAQ,UAAA,QAAQ,MAAhB;AAAiB,UAAA,SAAS,EAAC,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BA5EZ,EA6EGA,IAAI,IACH;AAAQ,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACS,IAAL,EAAN;AAAA,WAAjB;AAAoC,UAAA,QAAQ,EAAE3G,MAA9C;AAAsD,UAAA,SAAS,EAAC,aAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAOA,MAAM,GAAG,WAAH,GAAiB,MAA9B,CADF,CA9EJ,CA5CJ,CADF,EAkIE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,WAAW,EAAE,qBAAA4C,CAAC;AAAA,mBAAI,MAAI,CAACgE,IAAL,CAAUhE,CAAV,CAAJ;AAAA,WADhB;AAEE,UAAA,OAAO,EAAE,iBAAAA,CAAC;AAAA,mBAAI,MAAI,CAACiE,KAAL,CAAWjE,CAAX,CAAJ;AAAA,WAFZ;AAGE,UAAA,WAAW,EAAE,qBAAAA,CAAC;AAAA,mBAAI,MAAI,CAACkE,YAAL,CAAkBlE,CAAlB,CAAJ;AAAA,WAHhB;AAIE,UAAA,YAAY,EAAE,sBAAAA,CAAC;AAAA,mBAAI,MAAI,CAACkB,WAAL,CAAiBlB,CAAjB,CAAJ;AAAA,WAJjB;AAKE,UAAA,EAAE,EAAC,MALL;AAME,UAAA,GAAG,EAAE,MAAI,CAACpE,MAAL,CAAYgC,IANnB;AAOE,UAAA,KAAK,EAAE,MAAI,CAAC5B,WAPd;AAQE,UAAA,MAAM,EAAE,MAAI,CAACC,YARf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAYE;AACE,UAAA,EAAE,EAAC,SADL;AAEE,UAAA,GAAG,EAAE,MAAI,CAACL,MAAL,CAAY+B,OAFnB;AAGE,UAAA,KAAK,EAAE,MAAI,CAACzB,YAHd;AAIE,UAAA,MAAM,EAAE,MAAI,CAACC,aAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAZF,CAlIF,CADyB;AAAA,OAA3B,CADF;AA0JD;;;;EAzfoBtB,S;;AA4fvB,eAAea,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport store from 'store';\n\nimport { apiPath } from '../config';\nimport { UserContext } from '../App';\n\nconst images = {\n  alignPixel: require('../images/align-pixel.png'),\n  alignNormal: require('../images/align-normal.png'),\n  alignHorizontal: require('../images/align-horizontal.png'),\n  alignVertical: require('../images/align-vertical.png'),\n  brush: require('../images/brush.png'),\n  fill: require('../images/fill.png'),\n  picker: require('../images/picker.png'),\n}\n\nclass Designer extends Component {\n  myRefs = {};\n  clearColor = 'ffffff';\n  colors = ['000000', '412000', '451904', '5d1f0c', '4a1700', '490036', '48036c', '051e81', '0b0779', '1d295a', '004b59', '004800', '164000', '2c3500', '463a09', '401a02', '252525', '542800', '721e11', '7a240d', '721f00', '66004b', '5c0488', '0626a5', '201c8e', '1d3876', '005d6e', '005400', '1c5300', '384400', '4d3f09', '581f05', '343434', '763700', '9f241e', '982c0e', 'a81300', '80035f', '650d90', '082fca', '3531a3', '1d4892', '006f84', '036b03', '236600', '445200', '544509', '702408', '4e4e4e', '9a5000', 'b33a20', 'b02f0f', 'c8210a', '950f74', '7b23a7', '263dd4', '4642b4', '1d5cac', '00849c', '0e760e', '287800', '495600', '6c5809', '8d3a13', '686868', 'c36806', 'c85120', 'bf3624', 'df2512', 'aa2288', '933bbf', '444cde', '5753c5', '1d71c6', '0099bf', '188018', '2e8c00', '607100', '907609', 'ab511f', '757575', 'e47b07', 'e36920', 'd34e2a', 'ec3b24', 'ba3d99', '9d45c9', '4f5aec', '615dcf', '3286cf', '00abca', '279227', '3a980c', '6c7f00', 'ab8b0a', 'b56427', '8e8e8e', 'ff911a', 'fc8120', 'e7623e', 'fa5236', 'ca4da9', 'a74fd3', '5a68ff', '6d69db', '489bd9', '00bcde', '36a436', '47a519', '798d0a', 'c1a120', 'bf7730', 'a4a4a4', 'ffab1d', 'fd8c25', 'f36e4a', 'fc6148', 'd75ab6', 'b25ade', '6575ff', '7b77e9', '4ea8ec', '00d0f5', '4eb94e', '51af23', '8b9f1c', 'd0b02f', 'd0853a', 'b8b8b8', 'ffc51f', 'fe982c', 'fd7854', 'ff705f', 'e467c3', 'bd65e9', '7183ff', '8985f7', '55b6ff', '10dcff', '51cd51', '5cba2e', '9eb22f', 'debe3d', 'e19344', 'c5c5c5', 'ffd03b', 'ffae38', 'ff8a6a', 'ff7e7e', 'ef72ce', 'c56df1', '8091ff', '918dff', '69caff', '3ee1ff', '72da72', '71cf43', 'abbf3c', 'e6c645', 'eda04e', 'd0d0d0', 'ffd84c', 'ffb946', 'ff987c', 'ff8f8f', 'fb7eda', 'ce76fa', '90a0ff', '9c98ff', '74cbff', '64e7ff', '7ce47c', '85e357', 'b8cc49', 'edcd4c', 'f9ad58', 'd7d7d7', 'ffe651', 'ffbf51', 'ffa48b', 'ff9d9e', 'ff8de1', 'd583ff', '97a9ff', 'a7a4ff', '82d3ff', '76eaff', '85ed85', '8deb5f', 'c2d653', 'f5d862', 'fcb75c', 'e1e1e1', 'fff456', 'ffc66d', 'ffb39e', 'ffabad', 'ff9de5', 'da90ff', '9fb2ff', 'b2afff', '8ddaff', '8bedff', '99f299', '97f569', 'cde153', 'fbe276', 'ffc160', 'eaeaea', 'fff970', 'ffd587', 'ffc2b2', 'ffb9bd', 'ffa5e7', 'de9cff', 'afbeff', 'bbb8ff', '9fd4ff', '9aefff', 'b3f7b3', 'a0fe72', 'dbef6c', 'fcee98', 'ffca69', 'f4f4f4', 'ffff90', 'ffe498', 'ffd0c3', 'ffc7ce', 'ffafea', 'e2a9ff', 'c0cbff', 'c3c1ff', 'b4e2ff', 'b1f3ff', 'c3f9c3', 'b1ff8a', 'e8fc79', 'fdf3a9', 'ffcf7e', 'ffffff', 'ffffaa', 'ffe6ab', 'ffdad0', 'ffcade', 'ffb8ec', 'e6b6ff', 'cdd3ff', 'd3d1ff', 'c0ebff', 'c7f6ff', 'cdfccd', 'bcff9a', 'f2ffab', 'fdf3be', 'ffda96'];\n  hidePaletteTimeout = null;\n  canvasWidth = 700;\n  canvasHeight = 700;\n  previewWidth = 150;\n  previewHeight = 150;\n  paletteWidth = 400;\n  paletteHeight = 300;\n  paletteCols = 16;\n  paletteRows = 16;\n\n  state = {\n    width: 10,\n    height: 10,\n    previousWidth: 10,\n    previousHeight: 10,\n    name: 'Untitled Pattern',\n    align: 'normal',\n    mode: 'brush',\n    color: '000000',\n    drawing: false,\n    pattern: (new Array(100)).fill('ffffff'),\n    saving: false,\n    oldColor: '000000',\n    showPalette: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.myRefs = {\n      palette: React.createRef(),\n      paletteWrapper: React.createRef(),\n      color: React.createRef(),\n      saveButton: React.createRef(),\n      preview: React.createRef(),\n      grid: React.createRef(),\n    };\n  }\n\n  initPattern() {\n    let newPattern = [];\n\n    // Clear pattern to new size\n\n    for(let ii = 0; ii < this.state.width * this.state.height; ii++){\n      newPattern.push(this.clearColor);\n    }\n\n    // Copy previous pattern\n\n    for(let ii = 0; ii < this.state.previousWidth; ii++){\n      if(ii >= this.state.width) break;\n      for(let jj = 0; jj < this.state.previousHeight; jj++){\n        if(jj >= this.state.height) break;\n        newPattern[ii + jj * this.state.width] = this.state.pattern[ii + jj * this.state.previousWidth];\n      }\n    }\n\n    this.setState({\n      pattern: newPattern,\n      previewWidth: this.state.width,\n      previousHeight: this.state.height\n    });\n  }\n\n  componentDidMount() {\n    this.initPattern();\n    // this.renderGrid();\n    this.renderPalette();\n  }\n\n  componentDidUpdate() {\n    this.renderGrid();\n  }\n\n  renderPalette() {\n    let palette = this.myRefs.palette.current;\n    let context = palette.getContext('2d');\n\n    let width = (this.paletteWidth - 1) / this.paletteCols - 1;\n    let height = (this.paletteHeight - 1) / this.paletteRows - 1;\n\n    for (let y = 0; y < this.paletteRows; y++) {\n      for (let x = 0; x < this.paletteCols; x++) {\n        context.beginPath();\n        context.fillStyle = '#' + this.colors[y * this.paletteCols + x];\n        context.fillRect(x * (width + 1), y * (height + 1), width, height);\n        context.strokeStyle = '#ffffff';\n        context.lineWidth = 1;\n        context.stroke();\n      }\n    }\n\n    this.hidePalette();\n  }\n\n  showPalette() {\n    this.setState({oldColor: this.state.color, showPalette: true});\n    clearTimeout(this.hidePaletteTimeout);\n  }\n\n  hidePalette(delay = 0) {\n    this.hidePaletteTimeout = setTimeout(() => {\n      this.setState({showPalette: false});\n    }, delay);\n  }\n\n  getOffset(el) {\n    const box = el.getBoundingClientRect();\n\n    return {\n      top: box.top + window.pageYOffset - document.documentElement.clientTop,\n      left: box.left + window.pageXOffset - document.documentElement.clientLeft\n    };\n}\n\n  resetColor() {\n    this.setState({color: this.state.oldColor});\n  }\n\n  selectColor(e, hide = false) {\n    const palette = this.myRefs.palette.current;\n    const width = this.paletteWidth / this.paletteCols;\n    const height = this.paletteHeight / this.paletteRows;\n    const offset = this.getOffset(palette);\n    const offsetX = e.pageX - offset.left;\n    const offsetY = e.pageY - offset.top;\n    const x = Math.floor(offsetX / width);\n    const y = Math.floor(offsetY / height);\n\n    this.setState({color: this.colors[y * this.paletteCols + x]});\n\n    if(hide){\n      this.hidePalette();\n      this.setState({oldColor: this.state.color});\n    }\n  }\n\n  setMode(mode) {\n    this.setState({mode});\n  }\n\n  setAlign(align) {\n    this.setState({align});\n    // this.renderGrid();\n  }\n\n  startDrawing() {\n    this.setState({drawing: true});\n  }\n\n  stopDrawing() {\n    this.setState({drawing: false});\n  }\n\n  drag(e) {\n    if (this.state.drawing && this.state.mode === 'brush') {\n      this.draw(...this.getXY(e));\n    }\n  }\n\n  getXY(e) {\n    e = e.nativeEvent;\n    let size = this.state.width > this.state.height ? this.canvasWidth / this.state.width : this.canvasHeight / this.state.height;\n\n    if (this.state.align !== 'normal' && this.state.align !== 'pixel') {\n      size = this.state.width > this.state.height ? size - size / this.state.width / 2 : size - size / this.state.height / 2;\n    }\n\n    let x, y;\n    let centeringOffset = (this.canvasWidth - size * this.state.width) / 2;\n\n    if(this.state.align === 'horizontal'){\n      y = Math.floor(e.offsetY / size);\n      let horizontalOffset = !(y % 2) ? size / 2 : 0;\n      centeringOffset -= size / 4;\n      x = Math.floor((e.offsetX - centeringOffset - horizontalOffset) / size);\n    }\n\n    if(this.state.align === 'vertical'){\n      x = Math.floor((e.offsetX - centeringOffset) / size);\n      let verticalOffset = (x % 2) ? size / 2 : 0;\n      y = Math.floor((e.offsetY - verticalOffset) / size);\n    }\n\n    if(this.state.align === 'normal' || this.state.align === 'pixel'){\n      x = Math.floor((e.offsetX - centeringOffset) / size);\n      y = Math.floor(e.offsetY / size);\n    }\n\n    return [x, y];\n  }\n\n  click(e) {\n    if (this.state.mode === 'brush') {\n      const xy = this.getXY(e);\n\n      this.stopDrawing(e);\n      this.draw(...xy);\n    }\n\n    if (this.state.mode === 'fill') {\n      this.fill(...this.getXY(e));\n    }\n  }\n\n  getPatternCell(x, y) {\n    return this.state.pattern[x + y * this.state.width];\n  }\n\n  setPatternCell(x, y, color) {\n    const pattern = this.state.pattern;\n    pattern[x + y * this.state.width] = color;\n    this.setState({pattern});\n  }\n\n  draw(x, y) {\n    this.setPatternCell(x, y, this.state.color);\n    // this.renderGrid();\n  }\n\n  fill(x, y) {\n    const oldColor = this.getPatternCell(x, y) || this.clearColor;\n    if (oldColor === this.state.color) return;\n\n    let stack = [\n      [x, y]\n    ];\n\n    while (stack.length) {\n      const cell = stack.pop();\n      const x = cell[0];\n      const y = cell[1];\n\n      this.setPatternCell(x, y, this.state.color);\n\n      if (x - 1 >= 0 && oldColor === (this.getPatternCell(x - 1, y) || 'ffffff'))\n        stack.push([x - 1, y]);\n\n      if (x + 1 < this.state.width && oldColor === (this.getPatternCell(x + 1, y) || 'ffffff'))\n        stack.push([x + 1, y]);\n\n      if (y - 1 >= 0 && oldColor === (this.getPatternCell(x, y - 1) || 'ffffff'))\n        stack.push([x, y - 1]);\n\n      if (y + 1 < this.state.height && oldColor === (this.getPatternCell(x, y + 1) || 'ffffff'))\n        stack.push([x, y + 1]);\n    }\n\n    // this.renderGrid();\n  }\n\n  renderGrid() {\n    const canvas = this.myRefs.grid.current;\n    const context = canvas.getContext('2d');\n\n    let size = this.state.width > this.state.height ? this.canvasWidth / this.state.width : this.canvasHeight / this.state.height;\n\n    if (this.state.align !== 'normal' && this.state.align !== 'pixel') {\n      size = this.state.width > this.state.height ? size - size / this.state.width / 2 : size - size / this.state.height / 2;\n    }\n\n    const horizontalOffset = this.state.align === 'horizontal' ? size / 2: 0;\n    const verticalOffset = this.state.align === 'vertical' ? size / 2 : 0;\n    const centeringOffset = (this.canvasWidth - size * this.state.width - horizontalOffset) / 2;\n\n    canvas.setAttribute('width', canvas.getAttribute('width')); // Clear canvas\n\n    for (let x = 0; x < this.state.width; x++) {\n      for (let y = 0; y < this.state.height; y++) {\n        context.beginPath();\n\n        if(this.state.align === 'pixel'){\n          context.rect(x * size + centeringOffset, y * size, size, size);\n        }else{\n          context.arc(x * size + size / 2 + (!(y % 2) ? horizontalOffset : 0) + centeringOffset, y * size + size / 2 + (x % 2 ? verticalOffset : 0), size / 2 - 1, 0, 2 * Math.PI, false);\n        }\n\n        context.fillStyle = '#' + (this.getPatternCell(x, y) || this.clearColor);\n        context.fill();\n        context.lineWidth = 1;\n        context.strokeStyle = '#ddd';\n        context.stroke();\n      }\n    }\n\n    // Generate preview\n    // NOTE: Because the browser doesn't provide proper antialiasing,\n    // we use a small hack to draw the image at increasingly small sizes\n    // to smooth out the final image\n\n    const preview = this.myRefs.preview.current;\n    const previewContext = preview.getContext('2d');\n    const step1 = document.createElement('canvas');\n    const step1Context = step1.getContext('2d');\n\n    step1.width = this.canvasWidth / 2;\n    step1.height = this.canvasHeight / 2;\n\n    step1Context.clearRect(0, 0, step1.width, step1.height);\n    step1Context.drawImage(context.canvas, 0, 0, this.canvasWidth, this.canvasHeight, 0, 0, step1.width, step1.height);\n\n    previewContext.clearRect(0, 0, this.previewWidth, this.previewHeight);\n    previewContext.drawImage(step1, 0, 0, step1.width, step1.height, 0, 0, this.previewWidth, this.previewHeight);\n  }\n\n  save() {\n    const token = store.get('token');\n    this.setState({saving: true});\n\n    if(!this.state.pattern.find(cell => {\n      return cell !== this.state.pattern[0];\n    })){\n      this.setState({saving: false});\n      return alert('Pattern must have more than one color!');\n    }\n\n    fetch(`${apiPath}/patterns`, {\n      method: 'post',\n      body: JSON.stringify({\n        name: this.state.name,\n        description: '',\n        width: this.state.width,\n        height: this.state.height,\n        align: this.state.align,\n        pattern: this.state.pattern,\n      }),\n      headers: new Headers({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type' : 'application/json',\n      })\n    })\n    .then(response => response.json())\n    .then(response => {\n      this.setState({saving: false});\n      // TODO: Navigate to pattern route (/patterns/${response._id})\n    })\n    .catch(error => {\n      alert('Error: ' + error);\n      this.setState({saving: false});\n    });\n  }\n\n  render() {\n    const {color, align,  width, height, name, saving, mode} = this.state;\n    const {paletteWidth, paletteHeight} = this;\n\n    return (\n      <UserContext.Consumer>{user =>\n        <div id='editor' ref={this.myRefs.editor}>\n          <div className='tools'>\n              <div className='button-group'>\n                <button className={align === 'pixel' ? 'active' : ''} onClick={() => this.setAlign('pixel')} id='align-pixel'>\n                  <img src={images.alignPixel} width='30' height='30' alt='Align Pixel' />\n                </button>\n                <button className={align === 'normal' ? 'active' : ''} onClick={() => this.setAlign('normal')} id='align-normal'>\n                  <img src={images.alignNormal} width='30' height='30' alt='Align Normal' />\n                </button>\n                <button className={align === 'horizontal' ? 'active' : ''} onClick={() => this.setAlign('horizontal')} id='align-horizontal'>\n                  <img src={images.alignHorizontal} width='30' height='30' alt='Align Horizontal' />\n                </button>\n                <button className={align === 'vertical' ? 'active' : ''} onClick={() => this.setAlign('vertical')} id='align-vertical'>\n                  <img src={images.alignVertical} width='30' height='30' alt='Align Vertical' />\n                </button>\n              </div>\n\n              <div className='button-group'>\n                <button className={mode === 'brush' ? 'active' : ''} onClick={() => this.setMode('brush')} id='mode-brush'>\n                  <img src={images.brush} width='30' height='30' alt='Brush Tool' />\n                </button>\n                <button className={mode === 'fill' ? 'active' : ''} onClick={() => this.setMode('fill')} id='mode-fill'>\n                  <img src={images.fill} width='30' height='30' alt='Fill Tool' />\n                </button>\n              </div>\n\n              <div className='button-group show-overflow color-wrapper' onMouseOver={() => this.showPalette()} onMouseLeave={() => this.hidePalette(400)}>\n                <button id='color' style={{backgroundColor: `#${color}`}} ref={this.myRefs.color}>\n                  <img src={images.picker} width='30' height='30' alt='Picker Tool' />\n                </button>\n\n                <div id='palette-wrapper' className={this.state.showPalette ? 'show' : ''}>\n                  <canvas\n                    onClick={e => this.selectColor(e, true)}\n                    onMouseMove={e => this.selectColor(e)}\n                    onMouseDown={e => this.selectColor(e, true)}\n                    onMouseLeave={() => this.resetColor()}\n                    id='palette'\n                    ref={this.myRefs.palette}\n                    width={paletteWidth}\n                    height={paletteHeight}\n                  ></canvas>\n                </div>\n              </div>\n\n              <div className='right'>\n                <div className='select'>\n                  <select value={width} onChange={e => this.setState({width: e.target.value})}>\n                    <option value='10'>10</option>\n                    <option value='11'>11</option>\n                    <option value='12'>12</option>\n                    <option value='13'>13</option>\n                    <option value='14'>14</option>\n                    <option value='15'>15</option>\n                    <option value='16'>16</option>\n                    <option value='17'>17</option>\n                    <option value='18'>18</option>\n                    <option value='19'>19</option>\n                    <option value='20'>20</option>\n                    <option value='21'>21</option>\n                    <option value='22'>22</option>\n                    <option value='23'>23</option>\n                    <option value='24'>24</option>\n                    <option value='25'>25</option>\n                    <option value='26'>26</option>\n                    <option value='27'>27</option>\n                    <option value='28'>28</option>\n                    <option value='29'>29</option>\n                    <option value='30'>30</option>\n                    <option value='31'>31</option>\n                    <option value='32'>32</option>\n                    <option value='33'>33</option>\n                    <option value='34'>34</option>\n                    <option value='35'>35</option>\n                    <option value='36'>36</option>\n                    <option value='37'>37</option>\n                    <option value='38'>38</option>\n                    <option value='39'>39</option>\n                    <option value='40'>40</option>\n                  </select>\n                </div>\n\n                <div className='label'>x</div>\n\n                <div className='select'>\n                  <select value={height} onChange={e => this.setState({height: e.target.value})}>\n                    <option value='10'>10</option>\n                    <option value='11'>11</option>\n                    <option value='12'>12</option>\n                    <option value='13'>13</option>\n                    <option value='14'>14</option>\n                    <option value='15'>15</option>\n                    <option value='16'>16</option>\n                    <option value='17'>17</option>\n                    <option value='18'>18</option>\n                    <option value='19'>19</option>\n                    <option value='20'>20</option>\n                    <option value='21'>21</option>\n                    <option value='22'>22</option>\n                    <option value='23'>23</option>\n                    <option value='24'>24</option>\n                    <option value='25'>25</option>\n                    <option value='26'>26</option>\n                    <option value='27'>27</option>\n                    <option value='28'>28</option>\n                    <option value='29'>29</option>\n                    <option value='30'>30</option>\n                    <option value='31'>31</option>\n                    <option value='32'>32</option>\n                    <option value='33'>33</option>\n                    <option value='34'>34</option>\n                    <option value='35'>35</option>\n                    <option value='36'>36</option>\n                    <option value='37'>37</option>\n                    <option value='38'>38</option>\n                    <option value='39'>39</option>\n                    <option value='40'>40</option>\n                  </select>\n                </div>\n\n                <input value={name} onChange={e => this.setState({name: e.target.value})} type='text' placeholder='Pattern Name' />\n                {!user && <button disabled className='save-button'>Sign In To Save</button>}\n                {user &&\n                  <button onClick={() => this.save()} disabled={saving} className='save-button'>\n                    <span>{saving ? 'Saving...' : 'Save'}</span>\n                  </button>\n                }\n              </div>\n          </div>\n\n          <div className='grid-wrapper'>\n            <canvas\n              onMouseMove={e => this.drag(e)}\n              onClick={e => this.click(e)}\n              onMouseDown={e => this.startDrawing(e)}\n              onMouseLeave={e => this.stopDrawing(e)}\n              id='grid'\n              ref={this.myRefs.grid}\n              width={this.canvasWidth}\n              height={this.canvasHeight}\n            ></canvas>\n\n            <canvas\n              id='preview'\n              ref={this.myRefs.preview}\n              width={this.previewWidth}\n              height={this.previewHeight}\n            ></canvas>\n          </div>\n        </div>\n      }</UserContext.Consumer>\n    );\n  }\n}\n\nexport default Designer;\n"]},"metadata":{},"sourceType":"module"}