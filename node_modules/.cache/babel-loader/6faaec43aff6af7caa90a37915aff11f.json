{"ast":null,"code":"import _regeneratorRuntime from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/will/Documents/beader.org/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/will/Documents/beader.org/react/src/components/PatternsByUser.js\";\nimport queryString from 'query-string';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport api from '../api';\nimport { UserContext } from '../App';\nimport { titleSuffix } from '../config';\nimport LoadingIndicator from './LoadingIndicator';\n\nvar PatternsByUser =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PatternsByUser, _Component);\n\n  function PatternsByUser() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PatternsByUser);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PatternsByUser)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.limit = 20;\n    _this.state = {\n      patterns: [],\n      page: 1,\n      showNext: false,\n      showPrevious: false,\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(PatternsByUser, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetch();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.location.search !== this.props.location.search) {\n        window.scrollTo({\n          top: 0\n        });\n        this.fetch();\n      }\n    }\n  }, {\n    key: \"fetch\",\n    value: function () {\n      var _fetch = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var query, page, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = queryString.parse(this.props.location.search);\n                page = query.page ? parseInt(query.page, 10) : 1;\n                this.setState({\n                  loading: true\n                });\n                _context.next = 5;\n                return api.get(\"/patterns/user/\".concat(this.props.match.params.id, \"?page=\").concat(page, \"&limit=\").concat(this.limit));\n\n              case 5:\n                response = _context.sent;\n\n                if (response.patterns.length) {\n                  document.title = \"Patterns By \".concat(response.patterns[0].user.displayName).concat(titleSuffix);\n                } else {\n                  document.title = \"No Patterns Found\".concat(titleSuffix);\n                }\n\n                this.setState({\n                  page: page,\n                  patterns: response.patterns,\n                  showPrevious: page > 1,\n                  showNext: page < response.totalPages,\n                  loading: false\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetch() {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          loading = _this$state.loading,\n          page = _this$state.page,\n          patterns = _this$state.patterns,\n          showNext = _this$state.showNext,\n          showPrevious = _this$state.showPrevious;\n      return React.createElement(UserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, function (user) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, loading ? React.createElement(LoadingIndicator, {\n          loading: loading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, patterns.length === 0 && React.createElement(\"div\", {\n          className: \"pattern-tiles-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          className: \"pattern-tiles-container-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, \"Patterns By \", patterns[0].user.displayName), patterns.map(function (pattern) {\n          return React.createElement(\"div\", {\n            key: pattern._id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: \"/pattern/\".concat(pattern._id),\n            className: \"pattern-tile\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: pattern.imageUrl.replace('/upload', '/upload/c_thumb,w_150,h_150'),\n            alt: pattern.name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: \"pattern-tile-name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }, pattern.name), React.createElement(\"div\", {\n            className: \"pattern-tile-user\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, \"by \", pattern.user.displayName)));\n        })), patterns.length === 0 && React.createElement(\"div\", {\n          className: \"not-found\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"No patterns found\"), React.createElement(\"div\", {\n          className: \"pagination footer-navigation\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, showPrevious && React.createElement(Link, {\n          to: \"/patterns/user/\".concat(_this2.props.match.params.id, \"?page=\").concat(page - 1),\n          className: \"footer-link previous\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"Previous Page\"), showNext && React.createElement(Link, {\n          to: \"/patterns/user/\".concat(_this2.props.match.params.id, \"?page=\").concat(page + 1),\n          className: \"footer-link next\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"Next Page\"))));\n      });\n    }\n  }]);\n\n  return PatternsByUser;\n}(Component);\n\nexport default PatternsByUser;","map":{"version":3,"sources":["/Users/will/Documents/beader.org/react/src/components/PatternsByUser.js"],"names":["queryString","React","Component","Link","api","UserContext","titleSuffix","LoadingIndicator","PatternsByUser","limit","state","patterns","page","showNext","showPrevious","loading","fetch","prevProps","prevState","location","search","props","window","scrollTo","top","query","parse","parseInt","setState","get","match","params","id","response","length","document","title","user","displayName","totalPages","map","pattern","_id","imageUrl","replace","name"],"mappings":"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","sourcesContent":["import queryString from 'query-string';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport api from '../api';\nimport { UserContext } from '../App';\nimport { titleSuffix } from '../config';\n\nimport LoadingIndicator from './LoadingIndicator';\n\nclass PatternsByUser extends Component {\n  limit = 20;\n\n  state = {\n    patterns:[],\n    page: 1,\n    showNext: false,\n    showPrevious: false,\n    loading: true,\n  };\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n    if(prevProps.location.search !== this.props.location.search) {\n      window.scrollTo({top: 0});\n      this.fetch();\n    }\n  }\n\n  async fetch() {\n    const query = queryString.parse(this.props.location.search);\n    const page = query.page ? parseInt(query.page, 10) : 1;\n\n    this.setState({loading: true});\n\n    const response = await api.get(`/patterns/user/${this.props.match.params.id}?page=${page}&limit=${this.limit}`);\n\n    if (response.patterns.length) {\n      document.title = `Patterns By ${response.patterns[0].user.displayName}${titleSuffix}`;\n    } else {\n      document.title = `No Patterns Found${titleSuffix}`;\n    }\n\n    this.setState({\n      page,\n      patterns: response.patterns,\n      showPrevious: page > 1,\n      showNext: page < response.totalPages,\n      loading: false,\n    });\n  }\n\n  render() {\n    const { loading, page, patterns, showNext, showPrevious } = this.state;\n\n    return (\n        <UserContext.Consumer>{user =>\n          <div>\n            {loading ? <LoadingIndicator loading={loading}></LoadingIndicator> :\n              <div>\n                {patterns.length === 0 &&\n                  <div className='pattern-tiles-container'>\n                    <h3 className='pattern-tiles-container-header'>Patterns By {patterns[0].user.displayName}</h3>\n                    {patterns.map(pattern =>\n                      <div key={pattern._id}>\n                        <Link to={`/pattern/${pattern._id}`} className='pattern-tile'>\n                          <img src={pattern.imageUrl.replace('/upload', '/upload/c_thumb,w_150,h_150')} alt={pattern.name} />\n                          <div className='pattern-tile-name'>{pattern.name}</div>\n                          <div className='pattern-tile-user'>by {pattern.user.displayName}</div>\n                          </Link>\n                      </div>\n                    )}\n                  </div>\n                }\n\n                {patterns.length === 0 &&\n                  <div className='not-found'>No patterns found</div>\n                }\n\n                <div className='pagination footer-navigation'>\n                  {showPrevious &&\n                    <Link to={`/patterns/user/${this.props.match.params.id}?page=${page - 1}`} className='footer-link previous'>Previous Page</Link>\n                  }\n                  {showNext &&\n                    <Link to={`/patterns/user/${this.props.match.params.id}?page=${page + 1}`} className='footer-link next'>Next Page</Link>\n                  }\n                </div>\n              </div>\n            }\n          </div>\n        }</UserContext.Consumer>\n    );\n  }\n}\n\nexport default PatternsByUser;\n"]},"metadata":{},"sourceType":"module"}