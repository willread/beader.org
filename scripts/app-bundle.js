define("app",["exports","aurelia-router","aurelia-framework","aurelia-auth","aurelia-fetch-client","jquery","whatwg-fetch"],function(t,e,n,i,o){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var a,s,p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=(t.App=(a=(0,n.inject)(i.AuthService,i.FetchConfig,o.HttpClient),a(s=function(){function t(e,n,i){r(this,t),this.user="",this.auth=e,this.fetchConfig=n,this.http=i,i.configure(function(t){t.withBaseUrl("https://beader-api.herokuapp.com")})}return t.prototype.configureRouter=function(t,e){t.title="Beader",t.addPipelineStep("postcomplete",l),t.map([{route:"",moduleId:"patterns",title:""},{route:"/patterns",moduleId:"patterns",title:"Patterns",name:"patterns"},{route:"/pattern/:id",moduleId:"pattern",name:"pattern"},{route:"/patterns/user/:id",moduleId:"patternsByUser",name:"patternsByUser"},{route:"/designer",moduleId:"designer",name:"designer",title:"Designer"}]),this.router=e},t.prototype.activate=function(){this.fetchConfig.configure(),this.fetchUser()},t.prototype.fetchUser=function(){var t=this;this.auth.getMe().then(function(e){return t.user=e})},t.prototype.authenticate=function(t){var e=this;return this.auth.authenticate(t,!1,null).then(function(t){e.fetchUser()})},t.prototype.logout=function(){return this.auth.logout().then(function(t){})},t.prototype.deactivate=function(){this.subscription.dispose()},p(t,[{key:"isAuthenticated",get:function(){var t=this.auth.isAuthenticated();return t}}]),t}())||s),function(){function t(){r(this,t)}return t.prototype.run=function(t,e){return $("body").scrollTop(0),e()},t}())}),define("authConfig",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e={loginRedirect:"",profileUrl:"https://beader-api.herokuapp.com/auth",providers:{google:{clientId:"204545753423-3igb69ajb3be6ftc6mu8ftkgmvqe3hcv.apps.googleusercontent.com",url:"https://beader-api.herokuapp.com/auth"}}};t.default=e}),define("designer",["exports","aurelia-framework","aurelia-fetch-client","aurelia-router","aurelia-auth","./app"],function(t,e,n,i,o,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Designer=void 0;var s,p;t.Designer=(s=(0,e.inject)(n.HttpClient,i.Router,o.AuthService,r.App),s(p=function(){function t(e,n,i,o){a(this,t),this.colors=["000000","412000","451904","5d1f0c","4a1700","490036","48036c","051e81","0b0779","1d295a","004b59","004800","164000","2c3500","463a09","401a02","252525","542800","721e11","7a240d","721f00","66004b","5c0488","0626a5","201c8e","1d3876","005d6e","005400","1c5300","384400","4d3f09","581f05","343434","763700","9f241e","982c0e","a81300","80035f","650d90","082fca","3531a3","1d4892","006f84","036b03","236600","445200","544509","702408","4e4e4e","9a5000","b33a20","b02f0f","c8210a","950f74","7b23a7","263dd4","4642b4","1d5cac","00849c","0e760e","287800","495600","6c5809","8d3a13","686868","c36806","c85120","bf3624","df2512","aa2288","933bbf","444cde","5753c5","1d71c6","0099bf","188018","2e8c00","607100","907609","ab511f","757575","e47b07","e36920","d34e2a","ec3b24","ba3d99","9d45c9","4f5aec","615dcf","3286cf","00abca","279227","3a980c","6c7f00","ab8b0a","b56427","8e8e8e","ff911a","fc8120","e7623e","fa5236","ca4da9","a74fd3","5a68ff","6d69db","489bd9","00bcde","36a436","47a519","798d0a","c1a120","bf7730","a4a4a4","ffab1d","fd8c25","f36e4a","fc6148","d75ab6","b25ade","6575ff","7b77e9","4ea8ec","00d0f5","4eb94e","51af23","8b9f1c","d0b02f","d0853a","b8b8b8","ffc51f","fe982c","fd7854","ff705f","e467c3","bd65e9","7183ff","8985f7","55b6ff","10dcff","51cd51","5cba2e","9eb22f","debe3d","e19344","c5c5c5","ffd03b","ffae38","ff8a6a","ff7e7e","ef72ce","c56df1","8091ff","918dff","69caff","3ee1ff","72da72","71cf43","abbf3c","e6c645","eda04e","d0d0d0","ffd84c","ffb946","ff987c","ff8f8f","fb7eda","ce76fa","90a0ff","9c98ff","74cbff","64e7ff","7ce47c","85e357","b8cc49","edcd4c","f9ad58","d7d7d7","ffe651","ffbf51","ffa48b","ff9d9e","ff8de1","d583ff","97a9ff","a7a4ff","82d3ff","76eaff","85ed85","8deb5f","c2d653","f5d862","fcb75c","e1e1e1","fff456","ffc66d","ffb39e","ffabad","ff9de5","da90ff","9fb2ff","b2afff","8ddaff","8bedff","99f299","97f569","cde153","fbe276","ffc160","eaeaea","fff970","ffd587","ffc2b2","ffb9bd","ffa5e7","de9cff","afbeff","bbb8ff","9fd4ff","9aefff","b3f7b3","a0fe72","dbef6c","fcee98","ffca69","f4f4f4","ffff90","ffe498","ffd0c3","ffc7ce","ffafea","e2a9ff","c0cbff","c3c1ff","b4e2ff","b1f3ff","c3f9c3","b1ff8a","e8fc79","fdf3a9","ffcf7e","ffffff","ffffaa","ffe6ab","ffdad0","ffcade","ffb8ec","e6b6ff","cdd3ff","d3d1ff","c0ebff","c7f6ff","cdfccd","bcff9a","f2ffab","fdf3be","ffda96"],this.width=10,this.height=10,this.canvasWidth=700,this.canvasHeight=700,this.paletteWidth=400,this.paletteHeight=300,this.paletteCols=16,this.paletteRows=16,this.previousWidth=10,this.previousHeight=10,this.name="Untitled Pattern",this.align="normal",this.mode="brush",this.color="000000",this.clearColor="ffffff",this.drawing=!1,this.pattern=new Array(100).fill("ffffff"),this.saving=!1,this.oldColor="000000",this.hidePaletteTimeout=null,this.http=e,this.router=n,this.auth=i,this.app=o}return t.prototype.initPattern=function(){for(var t=[],e=0;e<this.width*this.height;e++)t.push(this.clearColor);for(var n=0;n<this.previousWidth&&!(n>=this.width);n++)for(var i=0;i<this.previousHeight&&!(i>=this.height);i++)t[n+i*this.width]=this.pattern[n+i*this.previousWidth];this.pattern=t,this.previousWidth=this.width,this.previousHeight=this.height},t.prototype.changePatternSize=function(){this.initPattern(),this.renderGrid()},t.prototype.attached=function(){$("#color").css("backgroundColor","#"+this.color),this.initPattern(),this.renderGrid(),this.renderPalette()},t.prototype.renderPalette=function(){for(var t=$("#palette")[0],e=t.getContext("2d"),n=(this.paletteWidth-1)/this.paletteCols-1,i=(this.paletteHeight-1)/this.paletteRows-1,o=0;o<this.paletteRows;o++)for(var r=0;r<this.paletteCols;r++)e.beginPath(),e.fillStyle="#"+this.colors[o*this.paletteCols+r],e.fillRect(r*(n+1),o*(i+1),n,i),e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke();this.hidePalette()},t.prototype.showPalette=function(){this.oldColor=this.color,$("#palette-wrapper").removeClass("hidden"),clearTimeout(this.hidePaletteTimeout)},t.prototype.hidePalette=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.hidePaletteTimeout=setTimeout(function(){$("#palette-wrapper").addClass("hidden")},t)},t.prototype.resetColor=function(){this.color=this.oldColor,$("#color").css("backgroundColor","#"+this.color)},t.prototype.selectColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$("#palette")[0],i=(n.getContext("2d"),this.paletteWidth/this.paletteCols),o=this.paletteHeight/this.paletteRows,r=t.pageX-$(n).offset().left,a=t.pageY-$(n).offset().top,s=Math.floor(r/i),p=Math.floor(a/o);this.color=this.colors[p*this.paletteCols+s],$("#color").css("backgroundColor","#"+this.color),e&&(this.hidePalette(),this.oldColor=this.color)},t.prototype.setMode=function(t){this.mode=t},t.prototype.setAlign=function(t){this.align=t,this.renderGrid()},t.prototype.startDrawing=function(){this.drawing=!0},t.prototype.stopDrawing=function(){this.drawing=!1},t.prototype.drag=function(t){this.drawing&&"brush"==this.mode&&this.draw.apply(this,this.getXY(t))},t.prototype.getXY=function(t){var e=($("#grid")[0],this.width>this.height?this.canvasWidth/this.width:this.canvasHeight/this.height);"normal"!==this.align&&"pixel"!==this.align&&(e=this.width>this.height?e-e/this.width/2:e-e/this.height/2);var n=void 0,i=void 0,o=(this.canvasWidth-e*this.width)/2;if("horizontal"==this.align){i=Math.floor(t.offsetY/e);var r=i%2?0:e/2;o-=e/4,n=Math.floor((t.offsetX-o-r)/e)}if("vertical"==this.align){n=Math.floor((t.offsetX-o)/e);var a=n%2?e/2:0;i=Math.floor((t.offsetY-a)/e)}return"normal"!=this.align&&"pixel"!=this.align||(n=Math.floor((t.offsetX-o)/e),i=Math.floor(t.offsetY/e)),[n,i]},t.prototype.click=function(t){"brush"==this.mode&&(this.stopDrawing(t),this.draw.apply(this,this.getXY(t))),"fill"==this.mode&&this.fill.apply(this,this.getXY(t))},t.prototype.getPatternCell=function(t,e){return this.pattern[t+e*this.width]},t.prototype.setPatternCell=function(t,e,n){this.pattern[t+e*this.width]=n},t.prototype.draw=function(t,e){var n=$("#grid")[0];n.getContext("2d");this.setPatternCell(t,e,this.color),this.renderGrid()},t.prototype.fill=function(t,e){var n=this.getPatternCell(t,e)||this.clearColor;if(n!=this.color){for(var i=[[t,e]];i.length;){var o=i.pop(),r=o[0],a=o[1];this.setPatternCell(r,a,this.color),r-1>=0&&n==(this.getPatternCell(r-1,a)||"ffffff")&&i.push([r-1,a]),r+1<this.width&&n==(this.getPatternCell(r+1,a)||"ffffff")&&i.push([r+1,a]),a-1>=0&&n==(this.getPatternCell(r,a-1)||"ffffff")&&i.push([r,a-1]),a+1<this.height&&n==(this.getPatternCell(r,a+1)||"ffffff")&&i.push([r,a+1])}this.renderGrid()}},t.prototype.renderGrid=function(){var t=$("#grid"),e=t[0].getContext("2d"),n=this.width>this.height?this.canvasWidth/this.width:this.canvasHeight/this.height;"normal"!==this.align&&"pixel"!==this.align&&(n=this.width>this.height?n-n/this.width/2:n-n/this.height/2);var i="horizontal"==this.align?n/2:0,o="vertical"==this.align?n/2:0,r=(this.canvasWidth-n*this.width-i)/2;t.attr("width",t.attr("width"));for(var a=0;a<this.width;a++)for(var s=0;s<this.height;s++)e.beginPath(),"pixel"==this.align?e.rect(a*n+r,s*n,n,n):e.arc(a*n+n/2+(s%2?0:i)+r,s*n+n/2+(a%2?o:0),n/2-1,0,2*Math.PI,!1),e.fillStyle="#"+(this.getPatternCell(a,s)||this.clearColor),e.fill(),e.lineWidth=1,e.strokeStyle="#ddd",e.stroke()},t.prototype.save=function(){var t=this;this.saving=!0;$("#grid"),new n.HttpClient;return this.pattern.find(function(e){return e!==t.pattern[0]})?void this.http.fetch("/patterns",{method:"post",body:(0,n.json)({name:this.name,description:"",width:this.width,height:this.height,align:this.align,pattern:this.pattern})}).then(function(t){return t.json()}).then(function(e){$("#save-button").prop("disabled",!1),$("#save-button").text("Save"),t.saving=!1,t.router.navigateToRoute("pattern",{id:e._id})}).catch(function(e){alert("Error: "+e),t.saving=!1}):(this.saving=!1,alert("Pattern must have more than one color!"))},t}())||p)}),define("environment",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("main",["exports","./environment","./authConfig"],function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){t.use.standardConfiguration().feature("resources").plugin("aurelia-auth",function(t){t.configure(a.default)}).plugin("aurelia-google-analytics",function(t){t.init("UA-89265200-1"),t.attach({logging:{enabled:!0},pageTracking:{enabled:!0},clickTracking:{enabled:!0}})}),r.default.debug&&t.use.developmentLogging(),r.default.testing&&t.use.plugin("aurelia-testing"),t.start().then(function(){return t.setRoot()})}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=o;var r=i(e),a=i(n);Promise.config({longStackTraces:r.default.debug,warnings:{wForgottenReturn:!1}})}),define("pattern",["exports","aurelia-framework","aurelia-fetch-client","./app","aurelia-router"],function(t,e,n,i,o){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pattern=void 0;var a,s;t.Pattern=(a=(0,e.inject)(n.HttpClient,i.App,o.Router),a(s=function(){function t(e,n,i){r(this,t),this.pattern={},this.userPatterns=[],this.totalUserPatterns=0,this.userPatternsLimit=10,this.errorMessage=null,this.http=e,this.app=n,this.router=i}return t.prototype.activate=function(t,e){var n=this;return this.http.fetch("/patterns/"+t.id).then(function(t){return t.json()}).then(function(t){n.pattern=t,e.navModel.setTitle(t.name),n.fetchUserPatterns(t.user._id)}).catch(function(t){n.errorMessage="Pattern not found."})},t.prototype.fetchUserPatterns=function(t){var e=this;return this.http.fetch("/patterns/user/"+t+"?page=1&limit="+this.userPatternsLimit).then(function(t){return t.json()}).then(function(t){e.userPatterns=t.patterns.filter(function(t){return t._id!==e.pattern._id}),e.totalUserPatterns=t.totalPatterns})},t.prototype.delete=function(){var t=this;if(confirm("Are you sure you want to delete this pattern?"))return this.http.fetch("/patterns/"+this.pattern._id,{method:"delete"}).then(function(e){t.router.navigateToRoute("patterns")})},t}())||s)}),define("patterns",["exports","aurelia-framework","aurelia-fetch-client","aurelia-router"],function(t,e,n,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Patterns=void 0;var r,a;t.Patterns=(r=(0,e.inject)(n.HttpClient),r(a=function(){function t(e){o(this,t),this.patterns=[],this.page=1,this.limit=20,this.showNext=!1,this.showPrevious=!1,this.loading=!0,this.http=e}return t.prototype.determineActivationStrategy=function(){return i.activationStrategy.replace},t.prototype.activate=function(t,e){var n=this;this.page=t.page?parseInt(t.page,10):1,this.http.fetch("/patterns?page="+this.page+"&limit="+this.limit).then(function(t){return t.json()}).then(function(t){n.patterns=t.patterns,n.page>1&&(n.showPrevious=!0),n.page<t.totalPages&&(n.showNext=!0),n.loading=!1})},t}())||a)}),define("patternsByUser",["exports","aurelia-framework","aurelia-fetch-client","aurelia-router"],function(t,e,n,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PatternsByUser=void 0;var r,a;t.PatternsByUser=(r=(0,e.inject)(n.HttpClient),r(a=function(){function t(e){o(this,t),this.patterns=[],this.page=1,this.limit=20,this.showNext=!1,this.showPrevious=!1,this.loading=!0,this.http=e}return t.prototype.determineActivationStrategy=function(){return i.activationStrategy.replace},t.prototype.activate=function(t,e){var n=this;this.page=t.page?parseInt(t.page,10):1,this.http.fetch("/patterns/user/"+t.id+"?page="+this.page+"&limit="+this.limit).then(function(t){return t.json()}).then(function(t){n.patterns=t.patterns,n.page>1&&(n.showPrevious=!0),n.page<t.totalPages&&(n.showNext=!0),n.patterns.length&&e.navModel.setTitle("Patterns by "+n.patterns[0].user.displayName),n.loading=!1})},t}())||a)}),define("resources/index",["exports"],function(t){"use strict";function e(t){t.globalResources(["./elements/loadingIndicator"])}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=e}),define("resources/elements/loadingIndicator",["exports","aurelia-framework"],function(t,e){"use strict";function n(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i,o){var r={};return Object.keys(i).forEach(function(t){r[t]=i[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingIndicator=void 0;var r,a;t.LoadingIndicator=(r=function t(){i(this,t),n(this,"loading",a,this)},a=o(r.prototype,"loading",[e.bindable],{enumerable:!0,initializer:function(){return!1}}),r)}),define("aurelia-auth/auth-service",["exports","aurelia-dependency-injection","aurelia-fetch-client","aurelia-event-aggregator","./authentication","./base-config","./oAuth1","./oAuth2","./auth-utilities"],function(t,e,n,i,o,r,a,s,p){"use strict";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthService=void 0;var u,c,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.AuthService=(u=(0,e.inject)(n.HttpClient,o.Authentication,a.OAuth1,s.OAuth2,r.BaseConfig,i.EventAggregator),u(c=function(){function t(e,n,i,o,r,a){l(this,t),this.http=e,this.auth=n,this.oAuth1=i,this.oAuth2=o,this.config=r.current,this.tokenInterceptor=n.tokenInterceptor,this.eventAggregator=a}return t.prototype.getMe=function(){var t=this.auth.getProfileUrl();return this.http.fetch(t).then(p.status)},t.prototype.isAuthenticated=function(){return this.auth.isAuthenticated()},t.prototype.getTokenPayload=function(){return this.auth.getPayload()},t.prototype.setToken=function(t){this.auth.setToken(Object.defineProperty({},this.config.tokenName,{value:t}))},t.prototype.signup=function(t,e,i){var o=this,r=this.auth.getSignupUrl(),a=void 0;return a="object"===h(arguments[0])?arguments[0]:{displayName:t,email:e,password:i},this.http.fetch(r,{method:"post",body:(0,n.json)(a)}).then(p.status).then(function(t){return o.config.loginOnSignup?o.auth.setToken(t):o.config.signupRedirect&&(window.location.href=o.config.signupRedirect),o.eventAggregator.publish("auth:signup",t),t})},t.prototype.login=function(t,e){var i=this,o=this.auth.getLoginUrl(),r=void 0;return r="string"!=typeof arguments[1]?arguments[0]:{email:t,password:e},this.http.fetch(o,{method:"post",headers:"string"==typeof r?{"Content-Type":"application/x-www-form-urlencoded"}:{},body:"string"==typeof r?r:(0,n.json)(r)}).then(p.status).then(function(t){return i.auth.setToken(t),i.eventAggregator.publish("auth:login",t),t})},t.prototype.logout=function(t){var e=this;return this.auth.logout(t).then(function(){e.eventAggregator.publish("auth:logout")})},t.prototype.authenticate=function(t,e,n){var i=this,o=this.oAuth2;return"1.0"===this.config.providers[t].type&&(o=this.oAuth1),o.open(this.config.providers[t],n||{}).then(function(t){return i.auth.setToken(t,e),i.eventAggregator.publish("auth:authenticate",t),t})},t.prototype.unlink=function(t){var e=this,i=this.config.baseUrl?(0,p.joinUrl)(this.config.baseUrl,this.config.unlinkUrl):this.config.unlinkUrl;return"get"===this.config.unlinkMethod?this.http.fetch(i+t).then(p.status).then(function(t){return e.eventAggregator.publish("auth:unlink",t),t}):"post"===this.config.unlinkMethod?this.http.fetch(i,{method:"post",body:(0,n.json)(t)}).then(p.status).then(function(t){return e.eventAggregator.publish("auth:unlink",t),t}):void 0},t}())||c)}),define("aurelia-auth/authentication",["exports","aurelia-dependency-injection","./base-config","./storage","./auth-utilities"],function(t,e,n,i,o){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Authentication=void 0;var a,s,p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t.Authentication=(a=(0,e.inject)(i.Storage,n.BaseConfig),a(s=function(){function t(e,n){r(this,t),this.storage=e,this.config=n.current,this.tokenName=this.config.tokenPrefix?this.config.tokenPrefix+"_"+this.config.tokenName:this.config.tokenName,this.idTokenName=this.config.tokenPrefix?this.config.tokenPrefix+"_"+this.config.idTokenName:this.config.idTokenName}return t.prototype.getLoginRoute=function(){return this.config.loginRoute},t.prototype.getLoginRedirect=function(){return this.initialUrl||this.config.loginRedirect},t.prototype.getLoginUrl=function(){return this.config.baseUrl?(0,o.joinUrl)(this.config.baseUrl,this.config.loginUrl):this.config.loginUrl},t.prototype.getSignupUrl=function(){return this.config.baseUrl?(0,o.joinUrl)(this.config.baseUrl,this.config.signupUrl):this.config.signupUrl},t.prototype.getProfileUrl=function(){return this.config.baseUrl?(0,o.joinUrl)(this.config.baseUrl,this.config.profileUrl):this.config.profileUrl},t.prototype.getToken=function(){return this.storage.get(this.tokenName)},t.prototype.getPayload=function(){var t=this.storage.get(this.tokenName);return this.decomposeToken(t)},t.prototype.decomposeToken=function(t){if(t&&3===t.split(".").length){var e=t.split(".")[1],n=e.replace(/-/g,"+").replace(/_/g,"/");try{return JSON.parse(decodeURIComponent(escape(window.atob(n))))}catch(t){return null}}},t.prototype.setInitialUrl=function(t){this.initialUrl=t},t.prototype.setToken=function(t,e){var n=t&&t[this.config.responseTokenProp],i=void 0;n&&((0,o.isObject)(n)&&(0,o.isObject)(n.data)?t=n:(0,o.isString)(n)&&(i=n)),!i&&t&&(i=this.config.tokenRoot&&t[this.config.tokenRoot]?t[this.config.tokenRoot][this.config.tokenName]:t[this.config.tokenName]),i&&this.storage.set(this.tokenName,i);var r=t&&t[this.config.responseIdTokenProp];r&&this.storage.set(this.idTokenName,r),this.config.loginRedirect&&!e?window.location.href=this.getLoginRedirect():e&&(0,o.isString)(e)&&(window.location.href=window.encodeURI(e))},t.prototype.removeToken=function(){this.storage.remove(this.tokenName)},t.prototype.isAuthenticated=function(){var t=this.storage.get(this.tokenName);if(!t)return!1;if(3!==t.split(".").length)return!0;var e=void 0;try{var n=t.split(".")[1],i=n.replace(/-/g,"+").replace(/_/g,"/");e=JSON.parse(window.atob(i)).exp}catch(t){return!1}return!e||Math.round((new Date).getTime()/1e3)<=e},t.prototype.logout=function(t){var e=this;return new Promise(function(n){e.storage.remove(e.tokenName),e.config.logoutRedirect&&!t?window.location.href=e.config.logoutRedirect:(0,o.isString)(t)&&(window.location.href=t),n()})},p(t,[{key:"tokenInterceptor",get:function(){var t=this.config,e=this.storage,n=this;return{request:function(i){if(n.isAuthenticated()&&t.httpInterceptor){var o=t.tokenPrefix?t.tokenPrefix+"_"+t.tokenName:t.tokenName,r=e.get(o);t.authHeader&&t.authToken&&(r=t.authToken+" "+r),i.headers.set(t.authHeader,r)}return i}}}}]),t}())||s)}),define("aurelia-auth/base-config",["exports","./auth-utilities"],function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfig=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t.BaseConfig=function(){function t(){n(this,t),this._current={httpInterceptor:!0,loginOnSignup:!0,baseUrl:"/",loginRedirect:"#/",logoutRedirect:"#/",signupRedirect:"#/login",loginUrl:"/auth/login",signupUrl:"/auth/signup",profileUrl:"/auth/me",loginRoute:"/login",signupRoute:"/signup",tokenRoot:!1,tokenName:"token",idTokenName:"id_token",tokenPrefix:"aurelia",responseTokenProp:"access_token",responseIdTokenProp:"id_token",unlinkUrl:"/auth/unlink/",unlinkMethod:"get",authHeader:"Authorization",authToken:"Bearer",withCredentials:!0,platform:"browser",storage:"localStorage",providers:{identSrv:{name:"identSrv",url:"/auth/identSrv",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:["profile","openid"],responseType:"code",scopePrefix:"",scopeDelimiter:" ",requiredUrlParams:["scope","nonce"],optionalUrlParams:["display","state"],state:function(){var t=Math.random().toString(36).substr(2);return encodeURIComponent(t)},display:"popup",type:"2.0",clientId:"jsClient",nonce:function(){var t=((Date.now()+Math.random())*Math.random()).toString().replace(".","");return encodeURIComponent(t)},popupOptions:{width:452,height:633}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",requiredUrlParams:["scope"],optionalUrlParams:["display","state"],display:"popup",type:"2.0",state:function(){var t=Math.random().toString(36).substr(2);return encodeURIComponent(t)},popupOptions:{width:452,height:633}},facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.3/dialog/oauth",redirectUri:window.location.origin+"/"||window.location.protocol+"//"+window.location.host+"/",scope:["email"],scopeDelimiter:",",nonce:function(){return Math.random()},requiredUrlParams:["nonce","display","scope"],display:"popup",type:"2.0",popupOptions:{width:580,height:400}},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",type:"2.0",popupOptions:{width:527,height:582}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",type:"2.0",popupOptions:{width:1020,height:618}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:[],scopeDelimiter:",",type:"2.0",popupOptions:{width:559,height:519}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",type:"1.0",popupOptions:{width:495,height:645}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,scope:["wl.emails"],scopeDelimiter:" ",requiredUrlParams:["display","scope"],display:"popup",type:"2.0",popupOptions:{width:500,height:560}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",display:"popup",type:"2.0",popupOptions:{width:550,height:369}}}}}return t.prototype.configure=function(t){(0,e.merge)(this._current,t)},i(t,[{key:"current",get:function(){return this._current}}]),t}()}),define("aurelia-auth/auth-utilities",["exports"],function(t){"use strict";function e(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function n(t,i,o){for(var r=t.$$hashKey,a=0,s=i.length;a<s;++a){var u=i[a];if(p(u)||l(u))for(var c=Object.keys(u),h=0,f=c.length;h<f;h++){var d=c[h],g=u[d];o&&p(g)?(p(t[d])||(t[d]=Array.isArray(g)?[]:{}),n(t[d],[g],!0)):t[d]=g}}return e(t,r),t}function i(t){if(t.status>=200&&t.status<400)return t.json().catch(function(t){return null});throw t}function o(t){return"undefined"!=typeof t}function r(t){return t.replace(/([\:\-\_]+(.))/g,function(t,e,n,i){return i?n.toUpperCase():n})}function a(t){var e=void 0,n=void 0,i={};return v((t||"").split("&"),function(t){t&&(n=t.split("="),e=decodeURIComponent(n[0]),i[e]=!o(n[1])||decodeURIComponent(n[1]))}),i}function s(t){return"string"==typeof t}function p(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":b(t))}function l(t){return"function"==typeof t}function u(t,e){if(/^(?:[a-z]+:)?\/\//i.test(e))return e;var n=[t,e].join("/"),i=function(t){return t.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")};return i(n)}function c(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":b(t))&&!Object.getPrototypeOf(t)}function h(t){if(null===t||f(t))return!1}function f(t){return t&&t.window===t}function d(t){return n(t,m.call(arguments,1),!1)}function g(t){return n(t,m.call(arguments,1),!0)}function v(t,e,n){var i=void 0,o=void 0;if(t)if(l(t))for(i in t)"prototype"===i||"length"===i||"name"===i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(Array.isArray(t)||h(t)){var r="object"!==("undefined"==typeof t?"undefined":b(t));for(i=0,o=t.length;i<o;i++)(r||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==v)t.forEach(e,n,t);else if(c(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)hasOwnProperty.call(t,i)&&e.call(n,t[i],i,t);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.status=i,t.isDefined=o,t.camelCase=r,t.parseQueryString=a,t.isString=s,t.isObject=p,t.isFunction=l,t.joinUrl=u,t.isBlankObject=c,t.isArrayLike=h,t.isWindow=f,t.extend=d,t.merge=g,t.forEach=v;var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=[].slice}),define("aurelia-auth/storage",["exports","aurelia-dependency-injection","./base-config"],function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var o,r;t.Storage=(o=(0,e.inject)(n.BaseConfig),o(r=function(){function t(e){i(this,t),this.config=e.current,this.storage=this._getStorage(this.config.storage)}return t.prototype.get=function(t){return this.storage.getItem(t)},t.prototype.set=function(t,e){return this.storage.setItem(t,e)},t.prototype.remove=function(t){return this.storage.removeItem(t)},t.prototype._getStorage=function(t){if("localStorage"===t){if("localStorage"in window&&null!==window.localStorage)return localStorage;throw new Error("Local Storage is disabled or unavailable.")}if("sessionStorage"===t){if("sessionStorage"in window&&null!==window.sessionStorage)return sessionStorage;throw new Error("Session Storage is disabled or unavailable.")}throw new Error("Invalid storage type specified: "+t)},t}())||r)}),define("aurelia-auth/oAuth1",["exports","aurelia-dependency-injection","./auth-utilities","./storage","./popup","./base-config","aurelia-fetch-client"],function(t,e,n,i,o,r,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OAuth1=void 0;var p,l;t.OAuth1=(p=(0,e.inject)(i.Storage,o.Popup,a.HttpClient,r.BaseConfig),p(l=function(){function t(e,n,i,o){s(this,t),this.storage=e,this.config=o.current,this.popup=n,this.http=i,this.defaults={url:null,name:null,popupOptions:null,redirectUri:null,authorizationEndpoint:null}}return t.prototype.open=function(t,e){var i=this,o=(0,n.extend)({},this.defaults,t),r=this.config.baseUrl?(0,n.joinUrl)(this.config.baseUrl,o.url):o.url;return"mobile"!==this.config.platform&&(this.popup=this.popup.open("",o.name,o.popupOptions,o.redirectUri)),this.http.fetch(r,{method:"post"}).then(n.status).then(function(t){"mobile"===i.config.platform?i.popup=i.popup.open([o.authorizationEndpoint,i.buildQueryString(t)].join("?"),o.name,o.popupOptions,o.redirectUri):i.popup.popupWindow.location=[o.authorizationEndpoint,i.buildQueryString(t)].join("?");var n="mobile"===i.config.platform?i.popup.eventListener(o.redirectUri):i.popup.pollPopup();return n.then(function(t){return i.exchangeForToken(t,e,o)})})},t.prototype.exchangeForToken=function(t,e,i){var o=(0,n.extend)({},e,t),r=this.config.baseUrl?(0,n.joinUrl)(this.config.baseUrl,i.url):i.url,s=this.config.withCredentials?"include":"same-origin";return this.http.fetch(r,{method:"post",body:(0,a.json)(o),
credentials:s}).then(n.status)},t.prototype.buildQueryString=function(t){var e=[];return(0,n.forEach)(t,function(t,n){return e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}),e.join("&")},t}())||l)}),define("aurelia-auth/popup",["exports","./auth-utilities","./base-config","aurelia-dependency-injection"],function(t,e,n,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;var r,a;t.Popup=(r=(0,i.inject)(n.BaseConfig),r(a=function(){function t(e){o(this,t),this.config=e.current,this.popupWindow=null,this.polling=null,this.url=""}return t.prototype.open=function(t,e,n,i){this.url=t;var o=this.stringifyOptions(this.prepareOptions(n||{}));return this.popupWindow=window.open(t,e,o),this.popupWindow&&this.popupWindow.focus&&this.popupWindow.focus(),this},t.prototype.eventListener=function(t){var n=this,i=new Promise(function(i,o){n.popupWindow.addEventListener("loadstart",function(r){if(0===r.url.indexOf(t)){var a=document.createElement("a");if(a.href=r.url,a.search||a.hash){var s=a.search.substring(1).replace(/\/$/,""),p=a.hash.substring(1).replace(/\/$/,""),l=(0,e.parseQueryString)(p),u=(0,e.parseQueryString)(s);(0,e.extend)(u,l),u.error?o({error:u.error}):i(u),n.popupWindow.close()}}}),popupWindow.addEventListener("exit",function(){o({data:"Provider Popup was closed"})}),popupWindow.addEventListener("loaderror",function(){deferred.reject({data:"Authorization Failed"})})});return i},t.prototype.pollPopup=function(){var t=this,n=this,i=new Promise(function(i,o){t.polling=setInterval(function(){try{var t=document.location.host,r=n.popupWindow.location.host;if(r===t&&(n.popupWindow.location.search||n.popupWindow.location.hash)){var a=n.popupWindow.location.search.substring(1).replace(/\/$/,""),s=n.popupWindow.location.hash.substring(1).replace(/[\/$]/,""),p=(0,e.parseQueryString)(s),l=(0,e.parseQueryString)(a);(0,e.extend)(l,p),l.error?o({error:l.error}):i(l),n.popupWindow.close(),clearInterval(n.polling)}}catch(t){}n.popupWindow?n.popupWindow.closed&&(clearInterval(n.polling),o({data:"Problem poll popup"})):(clearInterval(n.polling),o({data:"Provider Popup Blocked"}))},35)});return i},t.prototype.prepareOptions=function(t){var n=t.width||500,i=t.height||500;return(0,e.extend)({width:n,height:i,left:window.screenX+(window.outerWidth-n)/2,top:window.screenY+(window.outerHeight-i)/2.5},t)},t.prototype.stringifyOptions=function(t){var n=[];return(0,e.forEach)(t,function(t,e){n.push(e+"="+t)}),n.join(",")},t}())||a)}),define("aurelia-auth/oAuth2",["exports","aurelia-dependency-injection","./auth-utilities","./storage","./popup","./base-config","./authentication","aurelia-fetch-client"],function(t,e,n,i,o,r,a,s){"use strict";function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OAuth2=void 0;var l,u;t.OAuth2=(l=(0,e.inject)(i.Storage,o.Popup,s.HttpClient,r.BaseConfig,a.Authentication),l(u=function(){function t(e,n,i,o,r){p(this,t),this.storage=e,this.config=o.current,this.popup=n,this.http=i,this.auth=r,this.defaults={url:null,name:null,state:null,scope:null,scopeDelimiter:null,redirectUri:null,popupOptions:null,authorizationEndpoint:null,responseParams:null,requiredUrlParams:null,optionalUrlParams:null,defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code"}}return t.prototype.open=function(t,e){var i=this,o=(0,n.extend)({},this.defaults,t),r=o.name+"_state";(0,n.isFunction)(o.state)?this.storage.set(r,o.state()):(0,n.isString)(o.state)&&this.storage.set(r,o.state);var a=o.name+"_nonce";(0,n.isFunction)(o.nonce)?this.storage.set(a,o.nonce()):(0,n.isString)(o.nonce)&&this.storage.set(a,o.nonce);var s=o.authorizationEndpoint+"?"+this.buildQueryString(o),p=void 0;return p="mobile"===this.config.platform?this.popup.open(s,o.name,o.popupOptions,o.redirectUri).eventListener(o.redirectUri):this.popup.open(s,o.name,o.popupOptions,o.redirectUri).pollPopup(),p.then(function(t){return t.state&&t.state!==i.storage.get(r)?Promise.reject("OAuth 2.0 state parameter mismatch."):o.responseType.toUpperCase().indexOf("TOKEN")!==-1?i.verifyIdToken(t,o.name)?t:Promise.reject("OAuth 2.0 Nonce parameter mismatch."):i.exchangeForToken(t,e,o)})},t.prototype.verifyIdToken=function(t,e){var n=t&&t[this.config.responseIdTokenProp];if(!n)return!0;var i=this.auth.decomposeToken(n);if(!i)return!0;var o=i.nonce;if(!o)return!0;var r=this.storage.get(e+"_nonce");return o===r},t.prototype.exchangeForToken=function(t,e,i){var o=(0,n.extend)({},e,{code:t.code,clientId:i.clientId,redirectUri:i.redirectUri});t.state&&(o.state=t.state),(0,n.forEach)(i.responseParams,function(e){return o[e]=t[e]});var r=this.config.baseUrl?(0,n.joinUrl)(this.config.baseUrl,i.url):i.url,a=this.config.withCredentials?"include":"same-origin";return this.http.fetch(r,{method:"post",body:(0,s.json)(o),credentials:a}).then(n.status)},t.prototype.buildQueryString=function(t){var e=this,i=[],o=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return(0,n.forEach)(o,function(o){(0,n.forEach)(t[o],function(o){var r=(0,n.camelCase)(o),a=(0,n.isFunction)(t[o])?t[o]():t[r];if("state"===o){var s=t.name+"_state";a=encodeURIComponent(e.storage.get(s))}if("nonce"===o){var p=t.name+"_nonce";a=encodeURIComponent(e.storage.get(p))}"scope"===o&&Array.isArray(a)&&(a=a.join(t.scopeDelimiter),t.scopePrefix&&(a=[t.scopePrefix,a].join(t.scopeDelimiter))),i.push([o,a])})}),i.map(function(t){return t.join("=")}).join("&")},t}())||u)}),define("aurelia-auth/authorize-step",["exports","aurelia-dependency-injection","aurelia-router","./authentication"],function(t,e,n,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizeStep=void 0;var r,a;t.AuthorizeStep=(r=(0,e.inject)(i.Authentication),r(a=function(){function t(e){o(this,t),this.auth=e}return t.prototype.run=function(t,e){var i=this.auth.isAuthenticated(),o=this.auth.getLoginRoute();if(t.getAllInstructions().some(function(t){return t.config.auth})){if(!i)return this.auth.setInitialUrl(window.location.href),e.cancel(new n.Redirect(o))}else if(i&&t.getAllInstructions().some(function(t){return t.fragment===o})){var r=this.auth.getLoginRedirect();return e.cancel(new n.Redirect(r))}return e()},t}())||a)}),define("aurelia-auth/auth-fetch-config",["exports","aurelia-dependency-injection","aurelia-fetch-client","./authentication"],function(t,e,n,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FetchConfig=void 0;var r,a;t.FetchConfig=(r=(0,e.inject)(n.HttpClient,i.Authentication),r(a=function(){function t(e,n){o(this,t),this.httpClient=e,this.auth=n}return t.prototype.configure=function(){var t=this;this.httpClient.configure(function(e){e.withDefaults({headers:{Accept:"application/json"}}).withInterceptor(t.auth.tokenInterceptor)})},t}())||a)}),define("aurelia-auth/auth-filter",["exports"],function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.AuthFilterValueConverter=function(){function t(){e(this,t)}return t.prototype.toView=function(t,e){return t.filter(function(t){return void 0===t.config.auth||t.config.auth===e})},t}()}),define("text!app.html",["module"],function(t){t.exports='<template>\n  <require from="./styles.css"></require>\n\n  <header class="navbar">\n    <div class="logo">beader</div>\n\n    <div class="menu-left">\n      <a href="/#">Pattern Gallery</a>\n      <a route-href="route: designer" class="new-pattern">New Pattern</a>\n      <span if.bind="isAuthenticated">\n        <a route-href="route: patternsByUser; params.bind: {id: user._id}">My Patterns</a>\n      </span>\n    </div>\n\n    <div class="menu-right">\n      <a if.bind="!isAuthenticated" click.delegate="authenticate(\'google\')">Sign in with Google</a>\n      <span if.bind="isAuthenticated">\n        <span class="label">Welcome ${user.displayName}</span>\n        <a click.trigger="logout()">Log Out</a>\n      </span>\n    </div>\n  </header>\n  <router-view class="container"></router-view>\n</template>\n'}),define("text!styles.css",["module"],function(t){t.exports='@import url("https://fonts.googleapis.com/css?family=Muli:900|Roboto:300,600,900");\nbody {\n  margin: 0;\n  padding: 0;\n  background: #ccc;\n  color: #202121;\n  font-family: \'Roboto\', sans-serif;\n}\n*,\ninput {\n  box-sizing: border-box;\n}\na,\na:active,\na:visited {\n  color: #202121;\n  font-size: 13px;\n}\n.navbar {\n  position: relative;\n  width: 100%;\n  height: 70px;\n  background: #fff;\n  border-bottom: 1px solid #aaa;\n}\n.navbar .logo {\n  font-size: 32px;\n  color: #00b7e6;\n  font-family: Muli, Sans-serif;\n  font-weight: 900;\n  letter-spacing: -1px;\n  background: -webkit-linear-gradient(#00d8d6, #00b7e6);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  text-align: center;\n  line-height: 70px;\n}\n.navbar .menu-left {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n.navbar .menu-left a {\n  display: inline-block;\n  font-size: 12px;\n  line-height: 69px;\n  text-decoration: none;\n  text-transform: uppercase;\n  color: #333;\n  font-weight: 600;\n  padding: 0 20px;\n  border-right: 1px solid #eee;\n  float: left;\n}\n.navbar .menu-left a:hover {\n  background: #c7f4ff;\n  color: #0092b8;\n  cursor: hand;\n  cursor: pointer;\n}\n.navbar .menu-right {\n  height: 30px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  margin: 20px;\n}\n.navbar .menu-right .label {\n  display: inline-block;\n  color: #ccc;\n  font-size: 12px;\n  font-weight: 300;\n  padding-right: 10px;\n}\n.navbar .menu-right a {\n  display: inline-block;\n  color: #333;\n  font-size: 12px;\n  padding: 0 10px;\n  line-height: 28px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-weight: 600;\n  text-transform: uppercase;\n  cursor: hand;\n  cursor: pointer;\n}\n.navbar .menu-right a:hover {\n  background: #c7f4ff;\n  color: #0092b8;\n  border-color: #0092b8;\n}\n@media screen and (max-width: 640px) {\n  .navbar {\n    height: auto;\n  }\n  .navbar .menu-left,\n  .navbar .menu-right {\n    position: relative;\n    display: block;\n    left: auto;\n    right: auto;\n  }\n  .navbar .menu-left a {\n    width: 100%;\n    float: none;\n    border-top: 1px solid #ccc;\n    text-align: center;\n  }\n  .navbar .menu-left a.new-pattern {\n    display: none /* HACK: Hide pattern editor on mobile */;\n  }\n  .navbar .menu-right {\n    border-top: 1px solid #ccc;\n    text-align: center;\n    height: 70px;\n    padding-top: 20px;\n    margin: 0;\n  }\n}\n.pattern-tiles-container {\n  margin: 10px auto;\n  width: 900px;\n}\n.pattern-tiles-container .pattern-tile {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  float: left;\n}\n.pattern-tiles-container-small {\n  width: 720px;\n  margin: 0 auto;\n  text-align: center;\n}\n.pattern-tiles-container-small .pattern-tile {\n  float: none;\n  display: inline-block;\n}\n.pattern-tiles-container-header {\n  font-size: 22px;\n}\n.pattern-tile {\n  width: 170px;\n  height: 230px;\n  padding: 10px;\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.3);\n  text-decoration: none;\n}\n.pattern-tile img {\n  width: 150px;\n  height: 150px;\n}\n.pattern-tile-full {\n  width: 720px;\n  height: 720px;\n  margin: 20px auto;\n}\n.pattern-tile-full img {\n  width: 700px;\n  height: 700px;\n}\n.pattern-tile-small {\n  width: 120px;\n  height: 120px;\n}\n.pattern-tile-small img {\n  width: 100px;\n  height: 100px;\n}\n.pattern-tile-meta {\n  height: 47px;\n}\n.pattern-tile-name {\n  font-size: 13px;\n  margin-top: 5px;\n  font-weight: 600;\n  line-height: 16px;\n  max-height: 32px;\n  overflow: hidden;\n}\n.pattern-tile-user {\n  font-size: 12px;\n  font-weight: 300;\n  line-height: 15px;\n  max-height: 15px;\n  overflow: hidden;\n  margin: 5px 0;\n}\na:hover .pattern-tile-name {\n  color: #0092b8;\n}\n@media screen and (max-width: 640px) {\n  .pattern-tiles-container {\n    width: 100%;\n    margin-left: 10px;\n  }\n  .pattern-tile {\n    width: calc(50% - 15px);\n    height: auto;\n  }\n  .pattern-tile img {\n    width: 100%;\n    height: auto;\n  }\n  .pattern-tile-full {\n    width: calc(100% - 20px);\n  }\n  .pattern-tiles-container-small .pattern-tile {\n    width: 100px;\n  }\n}\n.tools {\n  background: #666;\n  width: 100%;\n  height: 60px;\n  padding: 10px;\n  box-shadow: inset 0px 0px 5px rgba(0,0,0,0.3);\n  border-bottom: 1px solid #ddd;\n}\n.tools .right {\n  float: right;\n}\n.tools .label {\n  display: inline-block;\n  font-size: 12px;\n  font-weight: 900;\n  color: #aaa;\n  line-height: 40px;\n  margin: 0 10px;\n  float: left;\n}\n.tools input {\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  height: 42px;\n  float: left;\n  padding: 13px 8px;\n  box-shadow: none;\n  background: #fff;\n  -webkit-appearance: none;\n  font-size: 14px;\n  line-height: 14px;\n  margin-left: 10px;\n  margin-right: 10px;\n}\n.tools input:focus {\n  outline: none;\n}\n.tools .select {\n  border: 1px solid #ccc;\n  width: 50px;\n  border-radius: 3px;\n  overflow: hidden;\n  background: #fff url("images/arrowdown.gif") no-repeat 90% 50%;\n  float: left;\n}\n.tools .select select {\n  padding: 13px 8px;\n  width: 50px;\n  border: none;\n  box-shadow: none;\n  background: transparent;\n  background-image: none;\n  -webkit-appearance: none;\n  font-size: 14px;\n  line-height: 14px;\n}\n.tools .select select:focus {\n  outline: none;\n}\n.tools .button-group {\n  margin-right: 10px;\n  float: left;\n  border-radius: 2px;\n  overflow: hidden;\n  border: 1px solid #fff;\n  position: relative;\n}\n.tools .button-group button {\n  display: inline-block;\n  float: left;\n  width: 60px;\n  height: 40px;\n  outline: none;\n  border-top: 0;\n  border-left: 0;\n  border-bottom: 0;\n  border-right: 1px solid #fff;\n  cursor: hand;\n  cursor: pointer;\n}\n.tools .button-group button:last-child {\n  border-right: 0;\n}\n.tools .button-group button.active {\n  background: #00b7e6;\n}\n.tools .button-group button:hover {\n  background: #0092b8;\n}\n.tools .save-button {\n  display: inline-block;\n  float: right;\n  height: 42px;\n  outline: none;\n  background: #20e65c;\n  color: #fff;\n  font-size: 14px;\n  padding: 0 20px;\n  line-height: 42px;\n  border: none;\n  border-radius: 5px;\n  cursor: hand;\n  cursor: pointer;\n}\n.tools .save-button:disabled {\n  opacity: 0.5;\n}\n.tools .save-button:hover {\n  background: #15bc48;\n}\n#palette-wrapper {\n  position: absolute;\n  z-index: 10;\n  top: 40px;\n  left: -1px;\n  width: 400px;\n  height: 300px;\n  background: #fff;\n  border: 1px solid #fff;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.75);\n  cursor: hand;\n  cursor: pointer;\n}\n#palette-wrapper.hidden {\n  display: none;\n}\n#color {\n  border-right: 0;\n}\n.show-overflow {\n  overflow: visible !important;\n}\n.footer-navigation {\n  display: block;\n  width: 100%;\n  float: none;\n  clear: both;\n  text-align: center;\n  margin: 40px 0;\n  padding-top: 40px;\n}\n.footer-navigation .footer-link {\n  font-size: 17px;\n  font-weight: 600;\n}\n.footer-navigation .footer-link:hover {\n  color: #666;\n}\n.footer-navigation .footer-link:nth-child(2) {\n  margin-left: 20px;\n}\n.pagination .footer-link.previous:before {\n  content: "\\00AB";\n}\n.pagination .footer-link.next:after {\n  content: " \\00BB";\n}\n.grid-wrapper {\n  display: block;\n  margin: 20px auto;\n  padding: 10px;\n  border-radius: 2px;\n}\n#grid {\n  display: block;\n  margin: 0 auto;\n}\n.pattern-header {\n  position: relative;\n  width: 720px;\n  margin: 20px auto;\n}\n.pattern-header .pattern-header-name {\n  font-size: 18px;\n  font-weight: 900;\n}\n.pattern-header .pattern-header-user {\n  font-size: 16px;\n  color: #788;\n}\n.pattern-header .pattern-header-description:not(:empty) {\n  font-size: 14px;\n  margin-top: 10px;\n}\n.pattern-header .delete-button {\n  font-size: 10px;\n  font-weight: 600;\n  background: #df2512;\n  color: #fff;\n  padding: 5px 20px;\n  margin: 10px 0;\n  border: 0;\n  border-radius: 5px;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.pattern-header .delete-button:hover {\n  background: #ef4938;\n}\n@media screen and (max-width: 640px) {\n  .pattern-header {\n    width: 100%;\n    margin: 20px 10px;\n  }\n}\n.loading-indicator {\n  background: #fff;\n  border-radius: 5px;\n  padding: 5px;\n}\n.not-found {\n  font-size: 24px;\n  margin: 50px 0;\n  color: #677;\n  text-align: center;\n}\n.footer-ads {\n  display: block;\n  width: 100%;\n  height: 100px;\n  margin: 20px 0;\n}\n'}),define("text!designer.html",["module"],function(t){t.exports='<template>\n  <div id="editor">\n    <div class="tools">\n        <div class="button-group">\n          <button class="${align == \'pixel\' ? \'active\' : \'\'}" click.delegate="setAlign(\'pixel\')" id="align-pixel">\n            <img src="./images/align-pixel.png" width="30" height="30">\n          </button>\n          <button class="${align == \'normal\' ? \'active\' : \'\'}" click.delegate="setAlign(\'normal\')" id="align-normal">\n            <img src="./images/align-normal.png" width="30" height="30">\n          </button>\n          <button class="${align == \'horizontal\' ? \'active\' : \'\'}" click.delegate="setAlign(\'horizontal\')" id="align-horizontal">\n            <img src="./images/align-horizontal.png" width="30" height="30">\n          </button>\n          <button class="${align == \'vertical\' ? \'active\' : \'\'}" click.delegate="setAlign(\'vertical\')" id="align-vertical">\n            <img src="./images/align-vertical.png" width="30" height="30">\n          </button>\n        </div>\n\n        <div class="button-group">\n          <button class="${mode == \'brush\' ? \'active\' : \'\'}" click.delegate="setMode(\'brush\')" id="mode-brush">\n            <img src="./images/brush.png" width="30" height="30">\n          </button>\n          <button class="${mode == \'fill\' ? \'active\' : \'\'}" click.delegate="setMode(\'fill\')" id="mode-fill">\n            <img src="./images/fill.png" width="30" height="30">\n          </button>\n        </div>\n\n        <div class="button-group show-overflow color-wrapper" mouseover.delegate="showPalette()" mouseleave.trigger="hidePalette(400)">\n          <button id="color">\n            <img src="./images/picker.png" width="30" height="30">\n          </button>\n\n          <div id="palette-wrapper">\n            <canvas click.trigger="selectColor($event, true)" mousemove.delegate="selectColor($event)" mousedown.trigger="selectColor($event, true)" mouseleave.trigger="resetColor()" id="palette" width.bind="paletteWidth" height.bind="paletteHeight"></canvas>\n          </div>\n        </div>\n\n        <div class="right">\n          <div class="select">\n            <select value.bind="width" change.trigger="changePatternSize()">\n              <option value="10">10</option>\n              <option value="11">11</option>\n              <option value="12">12</option>\n              <option value="13">13</option>\n              <option value="14">14</option>\n              <option value="15">15</option>\n              <option value="16">16</option>\n              <option value="17">17</option>\n              <option value="18">18</option>\n              <option value="19">19</option>\n              <option value="20">20</option>\n              <option value="21">21</option>\n              <option value="22">22</option>\n              <option value="23">23</option>\n              <option value="24">24</option>\n              <option value="25">25</option>\n              <option value="26">26</option>\n              <option value="27">27</option>\n              <option value="28">28</option>\n              <option value="29">29</option>\n              <option value="30">30</option>\n              <option value="31">31</option>\n              <option value="32">32</option>\n              <option value="33">33</option>\n              <option value="34">34</option>\n              <option value="35">35</option>\n              <option value="36">36</option>\n              <option value="37">37</option>\n              <option value="38">38</option>\n              <option value="39">39</option>\n              <option value="40">40</option>\n            </select>\n          </div>\n\n          <div class="label">x</div>\n\n          <div class="select">\n            <select value.bind="height" change.trigger="changePatternSize()">\n              <option value="10">10</option>\n              <option value="11">11</option>\n              <option value="12">12</option>\n              <option value="13">13</option>\n              <option value="14">14</option>\n              <option value="15">15</option>\n              <option value="16">16</option>\n              <option value="17">17</option>\n              <option value="18">18</option>\n              <option value="19">19</option>\n              <option value="20">20</option>\n              <option value="21">21</option>\n              <option value="22">22</option>\n              <option value="23">23</option>\n              <option value="24">24</option>\n              <option value="25">25</option>\n              <option value="26">26</option>\n              <option value="27">27</option>\n              <option value="28">28</option>\n              <option value="29">29</option>\n              <option value="30">30</option>\n              <option value="31">31</option>\n              <option value="32">32</option>\n              <option value="33">33</option>\n              <option value="34">34</option>\n              <option value="35">35</option>\n              <option value="36">36</option>\n              <option value="37">37</option>\n              <option value="38">38</option>\n              <option value="39">39</option>\n              <option value="40">40</option>\n            </select>\n          </div>\n\n          <input value.bind="name" type="text" placeholder="Pattern Name">\n          <button if.bind="!app.isAuthenticated" disabled class="save-button">Sign In To Save</button>\n          <button if.bind="app.isAuthenticated" click.trigger="save()" disabled.bind="saving" class="save-button">\n            <span if.bind="!saving">Save</span>\n            <span if.bind="saving">Saving...</span>\n          </button>\n        </div>\n    </div>\n\n    <div class="grid-wrapper">\n      <canvas mousemove.delegate="drag($event)" click.trigger="click($event)" mousedown.trigger="startDrawing($event)" mouseleave.trigger="stopDrawing($event)" id="grid" width.bind="canvasWidth" height.bind="canvasHeight"></canvas>\n    </div>\n  </div>\n</template>\n'}),define("text!pattern.html",["module"],function(t){t.exports='<template>\n  <div if.bind="!errorMessage">\n\n  <div class="pattern-header">\n    <div class="pattern-header-name">${pattern.name}</div>\n    <div class="pattern-header-user">by ${pattern.user.displayName}</div>\n\t  <div class="pattern-header-description">${pattern.description}</div>\n    <button if.bind="app.user._id == pattern.user._id" click.trigger="delete()" class="delete-button">Delete This Pattern</button>\n  </div>\n\n\t<div class="pattern-tile pattern-tile-full">\n  \t<img src="${pattern.imageUrl}">\n  </div>\n\n  <div class="pattern-tiles-container pattern-tiles-container-small">\n  \t<div if.bind="userPatterns.length > 0" class="user-patterns">\n  \t\t<h3 class="pattern-tiles-container-header">More patterns by ${pattern.user.displayName}</h3>\n\t    <span repeat.for="pattern of userPatterns">\n\t      <a route-href="route: pattern; params.bind: {id: pattern._id}" class="pattern-tile pattern-tile-small">\n\t        <img src="${pattern.imageUrl.replace(\'/upload\', \'/upload/c_thumb,w_100,h_100\')}" />\n\t      </a>\n\t    </span>\n\n\t    <div class="footer-navigation">\n\t    \t<a class="footer-link" if.bind="totalUserPatterns > userPatternsLimit" route-href="route: patternsByUser; params.bind: {id: pattern.user._id}">See all patterns By ${pattern.user.displayName}</a>\n\t    </div>\n  \t</div>\n  </div>\n\n  <h1 if.bind="errorMessage">${errorMessage}</h1>\n</template>\n'}),define("text!patterns.html",["module"],function(t){t.exports='<template>\n  <loading-indicator loading.bind="!patterns.length"></loading-indicator>\n\n  <div class="pattern-tiles-container">\n    <div repeat.for="pattern of patterns">\n      <a route-href="route: pattern; params.bind: {id: pattern._id}" class="pattern-tile">\n        <img src="${pattern.imageUrl.replace(\'/upload\', \'/upload/c_thumb,w_150,h_150\')}" />\n        <div class="pattern-tile-meta">\n          <div class="pattern-tile-name">${pattern.name}</div>\n          <div class="pattern-tile-user">by ${pattern.user.displayName}</div>\n        </div>\n      </a>\n    </div>\n  </div>\n\n  <div class="not-found" if.bind="!loading && patterns.length == 0">No patterns found</div>\n\n  <div class="pagination footer-navigation">\n    <a if.bind="showPrevious" class="footer-link previous" route-href="route: patterns; params.bind: {page: page - 1}">Previous Page</a>\n    <a if.bind="showNext" class="footer-link next" route-href="route: patterns; params.bind: {page: page + 1}">Next Page</a>\n  </div>\n\n  <div class="footer-ads">\n    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>\n    <!-- Beader Footer -->\n    <ins class="adsbygoogle"\n         style="display:block"\n         data-ad-client="ca-pub-5755919955683762"\n         data-ad-slot="9668770775"\n         data-ad-format="auto"></ins>\n    <script>\n    (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n  </div>\n</template>\n'}),define("text!patternsByUser.html",["module"],function(t){t.exports='<template>\n  <loading-indicator loading.bind="loading"></loading-indicator>\n\n  <div class="pattern-tiles-container" if.bind="!loading && patterns.length > 0">\n    <h3 class="pattern-tiles-container-header">Patterns By ${patterns[0].user.displayName}</h3>\n    <div repeat.for="pattern of patterns">\n      <a route-href="route: pattern; params.bind: {id: pattern._id}" class="pattern-tile">\n        <img src="${pattern.imageUrl.replace(\'/upload\', \'/upload/c_thumb,w_150,h_150\')}" />\n        <div class="pattern-tile-name">${pattern.name}</div>\n        <div class="pattern-tile-user">by ${pattern.user.displayName}</div>\n      </a>\n    </div>\n  </div>\n\n  <div class="not-found" if.bind="!loading && patterns.length == 0">No patterns found</div>\n\n  <div class="pagination footer-navigation">\n    <a if.bind="showPrevious" class="footer-link previous" route-href="route: patterns; params.bind: {page: page - 1}">Previous Page</a>\n    <a if.bind="showNext" class="footer-link next" route-href="route: patterns; params.bind: {page: page + 1}">Next Page</a>\n  </div>\n</template>\n'}),define("text!resources/elements/loadingIndicator.html",["module"],function(t){t.exports='<template style="display: block; text-align: center;">\n  <img src="images/loading.gif" style="margin: 30px 0;" width="60" height="60" class="loading-indicator" if.bind="loading"></div>\n</template>'});