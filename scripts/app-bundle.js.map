{"version":3,"sources":["app.js","authConfig.js","designer.js","environment.js","main.js","pattern.js","patterns.js","patternsByUser.js","resources/index.js","resources/elements/loadingIndicator.js","styles.styl"],"names":["App","auth","fetchConfig","http","user","configure","config","withBaseUrl","configureRouter","router","title","addPipelineStep","ScrollUpStep","map","route","moduleId","name","activate","fetchUser","getMe","then","authenticate","logout","deactivate","subscription","dispose","isAuthenticated","run","routingContext","next","$","scrollTop","profileUrl","providers","google","clientId","url","Designer","app","colors","width","height","canvasWidth","canvasHeight","paletteWidth","paletteHeight","paletteCols","paletteRows","previousWidth","previousHeight","align","mode","color","clearColor","drawing","pattern","saving","initPattern","newPattern","ii","push","jj","changePatternSize","renderGrid","attached","css","renderPalette","palette","context","getContext","y","x","beginPath","fillStyle","fillRect","strokeStyle","lineWidth","stroke","addClass","selectColor","$event","Math","floor","offsetX","pageX","offset","left","offsetY","pageY","top","setMode","setAlign","startDrawing","stopDrawing","drag","draw","getXY","canvas","size","centeringOffset","horizontalOffset","console","log","verticalOffset","click","fill","getPatternCell","setPatternCell","oldColor","stack","length","cell","pop","attr","arc","PI","save","find","alert","fetch","method","body","description","image","toDataURL","response","json","prop","text","navigateToRoute","id","_id","catch","error","debug","testing","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","plugin","baseConfig","init","attach","logging","enabled","pageTracking","clickTracking","developmentLogging","start","setRoot","Pattern","userPatterns","totalUserPatterns","userPatternsLimit","errorMessage","params","routeConfig","navModel","setTitle","fetchUserPatterns","userId","patterns","filter","totalPatterns","delete","confirm","Patterns","page","limit","showNext","showPrevious","loading","determineActivationStrategy","replace","parseInt","totalPages","PatternsByUser","displayName","globalResources","LoadingIndicator"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import 'jquery';\nimport 'whatwg-fetch';\nimport {Router, RouterConfiguration} from 'aurelia-router';\nimport {inject} from 'aurelia-framework';\nimport {AuthService, FetchConfig} from 'aurelia-auth';\nimport {HttpClient, json} from 'aurelia-fetch-client';\n\n@inject(AuthService, FetchConfig, HttpClient)\nexport class App {\n  user = '';\n\n  constructor(auth, fetchConfig, http) {\n    this.auth = auth;\n    this.fetchConfig = fetchConfig;\n    this.http = http;\n\n    http.configure(config => {\n      config\n        .withBaseUrl(\"https://beader-api.herokuapp.com\");\n    });\n  }\n\n  configureRouter(config, router){\n    config.title = 'Beader';\n    config.addPipelineStep('postcomplete', ScrollUpStep);\n    config.map([\n      { route: '', moduleId: 'patterns', title: '' },\n      { route: '/patterns', moduleId: 'patterns', title: 'Patterns', name: 'patterns' },\n      { route: '/pattern/:id', moduleId: 'pattern', name: 'pattern'},\n      { route: '/patterns/user/:id', moduleId: 'patternsByUser', name: 'patternsByUser'},\n      { route: '/designer',  moduleId: 'designer', name:'designer', title: 'Designer' }\n    ]);\n\n    this.router = router;\n  }\n\n  activate() {\n    this.fetchConfig.configure();\n    this.fetchUser();\n  }\n\n  fetchUser() {\n    this.auth.getMe()\n      .then(user => {\n        return this.user = user;\n      });\n  }\n\n  authenticate(name) {\n    return this.auth.authenticate(name, false, null)\n      .then(response => {\n        this.fetchUser();\n      });\n  }\n\n  get isAuthenticated() {\n    let isAuthenticated = this.auth.isAuthenticated();\n    return isAuthenticated;\n  }\n\n  logout() {\n    return this.auth.logout()\n      .then(response => {});\n  }\n\n  deactivate() {\n    this.subscription.dispose();\n  }\n}\n\nclass ScrollUpStep {\n  run(routingContext, next) {\n    $(\"body\").scrollTop(0);\n    return next();\n  }\n}","let config = {\n  profileUrl: 'https://beader-api.herokuapp.com/auth',\n  providers: {\n    google: {\n      clientId: '204545753423-3igb69ajb3be6ftc6mu8ftkgmvqe3hcv.apps.googleusercontent.com',\n      url: 'https://beader-api.herokuapp.com/auth'\n    }\n  }\n}\n\nexport default config;\n","import {inject} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {Router} from 'aurelia-router';\nimport {AuthService} from 'aurelia-auth';\nimport {App} from './app';\n\n@inject(HttpClient, Router, AuthService, App)\nexport class Designer {\n  constructor(http, router, auth, app) {\n    this.http = http;\n    this.router = router;\n    this.auth = auth;\n    this.app = app;\n  }\n\n  // Palette colors\n\n  colors = ['000000', '412000', '451904', '5d1f0c', '4a1700', '490036', '48036c', '051e81', '0b0779', '1d295a', '004b59', '004800', '164000', '2c3500', '463a09', '401a02', '252525', '542800', '721e11', '7a240d', '721f00', '66004b', '5c0488', '0626a5', '201c8e', '1d3876', '005d6e', '005400', '1c5300', '384400', '4d3f09', '581f05', '343434', '763700', '9f241e', '982c0e', 'a81300', '80035f', '650d90', '082fca', '3531a3', '1d4892', '006f84', '036b03', '236600', '445200', '544509', '702408', '4e4e4e', '9a5000', 'b33a20', 'b02f0f', 'c8210a', '950f74', '7b23a7', '263dd4', '4642b4', '1d5cac', '00849c', '0e760e', '287800', '495600', '6c5809', '8d3a13', '686868', 'c36806', 'c85120', 'bf3624', 'df2512', 'aa2288', '933bbf', '444cde', '5753c5', '1d71c6', '0099bf', '188018', '2e8c00', '607100', '907609', 'ab511f', '757575', 'e47b07', 'e36920', 'd34e2a', 'ec3b24', 'ba3d99', '9d45c9', '4f5aec', '615dcf', '3286cf', '00abca', '279227', '3a980c', '6c7f00', 'ab8b0a', 'b56427', '8e8e8e', 'ff911a', 'fc8120', 'e7623e', 'fa5236', 'ca4da9', 'a74fd3', '5a68ff', '6d69db', '489bd9', '00bcde', '36a436', '47a519', '798d0a', 'c1a120', 'bf7730', 'a4a4a4', 'ffab1d', 'fd8c25', 'f36e4a', 'fc6148', 'd75ab6', 'b25ade', '6575ff', '7b77e9', '4ea8ec', '00d0f5', '4eb94e', '51af23', '8b9f1c', 'd0b02f', 'd0853a', 'b8b8b8', 'ffc51f', 'fe982c', 'fd7854', 'ff705f', 'e467c3', 'bd65e9', '7183ff', '8985f7', '55b6ff', '10dcff', '51cd51', '5cba2e', '9eb22f', 'debe3d', 'e19344', 'c5c5c5', 'ffd03b', 'ffae38', 'ff8a6a', 'ff7e7e', 'ef72ce', 'c56df1', '8091ff', '918dff', '69caff', '3ee1ff', '72da72', '71cf43', 'abbf3c', 'e6c645', 'eda04e', 'd0d0d0', 'ffd84c', 'ffb946', 'ff987c', 'ff8f8f', 'fb7eda', 'ce76fa', '90a0ff', '9c98ff', '74cbff', '64e7ff', '7ce47c', '85e357', 'b8cc49', 'edcd4c', 'f9ad58', 'd7d7d7', 'ffe651', 'ffbf51', 'ffa48b', 'ff9d9e', 'ff8de1', 'd583ff', '97a9ff', 'a7a4ff', '82d3ff', '76eaff', '85ed85', '8deb5f', 'c2d653', 'f5d862', 'fcb75c', 'e1e1e1', 'fff456', 'ffc66d', 'ffb39e', 'ffabad', 'ff9de5', 'da90ff', '9fb2ff', 'b2afff', '8ddaff', '8bedff', '99f299', '97f569', 'cde153', 'fbe276', 'ffc160', 'eaeaea', 'fff970', 'ffd587', 'ffc2b2', 'ffb9bd', 'ffa5e7', 'de9cff', 'afbeff', 'bbb8ff', '9fd4ff', '9aefff', 'b3f7b3', 'a0fe72', 'dbef6c', 'fcee98', 'ffca69', 'f4f4f4', 'ffff90', 'ffe498', 'ffd0c3', 'ffc7ce', 'ffafea', 'e2a9ff', 'c0cbff', 'c3c1ff', 'b4e2ff', 'b1f3ff', 'c3f9c3', 'b1ff8a', 'e8fc79', 'fdf3a9', 'ffcf7e', 'ffffff', 'ffffaa', 'ffe6ab', 'ffdad0', 'ffcade', 'ffb8ec', 'e6b6ff', 'cdd3ff', 'd3d1ff', 'c0ebff', 'c7f6ff', 'cdfccd', 'bcff9a', 'f2ffab', 'fdf3be', 'ffda96'];\n\n  // Defaults\n\n  width = 10\n  height = 10\n  canvasWidth = 700\n  canvasHeight = 700\n  paletteWidth = 400\n  paletteHeight = 300\n  paletteCols = 16\n  paletteRows = 16\n  previousWidth = 10\n  previousHeight = 10\n  name = 'Untitled Pattern'\n  align = 'normal'\n  mode = 'brush'\n  color = '000000'\n  clearColor = 'ffffff'\n  drawing = false\n  pattern = []\n  saving = false\n\n  initPattern() {\n    let newPattern = [];\n\n    // Clear pattern to new size\n\n    for(let ii = 0; ii < this.width * this.height; ii++){\n      newPattern.push(this.clearColor);\n    }\n\n    // Copy previous pattern\n\n    for(let ii = 0; ii < this.previousWidth; ii++){\n      if(ii >= this.width) break;\n      for(let jj = 0; jj < this.previousHeight; jj++){\n        if(jj >= this.height) break;\n        newPattern[ii + jj * this.width] = this.pattern[ii + jj * this.previousWidth];\n      }\n    }\n\n    this.pattern = newPattern;\n    this.previousWidth = this.width;\n    this.previousHeight = this.height;\n  }\n\n  changePatternSize() {\n    this.initPattern();\n    this.renderGrid();\n  }\n\n  attached() {\n    $('#color').css('backgroundColor', '#' + this.color);\n\n    this.initPattern();\n    this.renderGrid();\n    this.renderPalette();\n  }\n\n  // Render the palette canvas\n\n  renderPalette() {\n    let palette = $('#palette')[0];\n    let context = palette.getContext('2d');\n\n    let width = (this.paletteWidth - 1) / this.paletteCols - 1;\n    let height = (this.paletteHeight - 1) / this.paletteRows - 1;\n\n    for (let y = 0; y < this.paletteRows; y++) {\n      for (let x = 0; x < this.paletteCols; x++) {\n        context.beginPath();\n        context.fillStyle = '#' + this.colors[y * this.paletteCols + x];\n        context.fillRect(x * (width + 1), y * (height + 1), width, height);\n        context.strokeStyle = '#ffffff';\n        context.lineWidth = 1;\n        context.stroke();\n      }\n    }\n\n    $('#palette-wrapper').addClass('hidden');\n  }\n\n  selectColor($event) {\n    let palette = $('#palette')[0];\n    let context = palette.getContext('2d');\n\n    let width = Math.floor(this.paletteWidth / this.paletteCols);\n    let height = Math.floor(this.paletteHeight / this.paletteRows);\n\n    let offsetX = $event.pageX - $(palette).offset().left;\n    let offsetY = $event.pageY - $(palette).offset().top;\n\n    let x = Math.floor(offsetX / width);\n    let y = Math.floor(offsetY / height);\n\n    this.color = this.colors[y * this.paletteCols + x];\n\n    $('#color').css('backgroundColor', '#' + this.color);\n  }\n\n  setMode(mode) {\n    this.mode = mode;\n  }\n\n  setAlign(align) {\n    this.align = align;\n    this.renderGrid();\n  }\n\n  startDrawing() {\n    this.drawing = true;\n  }\n\n  stopDrawing() {\n    this.drawing = false;\n  }\n\n  drag($event) {\n    if (this.drawing && this.mode == 'brush') {\n      this.draw(...this.getXY($event));\n    }\n  }\n\n  getXY($event) {\n    let canvas = $('#grid')[0];\n    let size = this.width > this.height ? this.canvasWidth / this.width : this.canvasHeight / this.height;\n\n    if (this.align !== 'normal') {\n      size = this.width > this.height ? size - size / this.width / 2 : size - size / this.height / 2;\n    }\n\n    let x, y;\n    let centeringOffset = (this.canvasWidth - size * this.width) / 2;\n\n    if(this.align == 'horizontal'){\n      y = Math.floor($event.offsetY / size);\n      let horizontalOffset = !(y % 2) ? size / 2 : 0;  \n      centeringOffset -= size / 4;\n      x = Math.floor(($event.offsetX - centeringOffset - horizontalOffset) / size);\n      console.log(y, horizontalOffset, centeringOffset, x);\n    }\n\n    if(this.align == 'vertical'){\n      x = Math.floor(($event.offsetX - centeringOffset) / size);\n      let verticalOffset = (x % 2) ? size / 2 : 0;  \n      y = Math.floor(($event.offsetY - verticalOffset) / size);\n    }\n\n    if(this.align == 'normal'){\n      x = Math.floor(($event.offsetX - centeringOffset) / size);\n      y = Math.floor($event.offsetY / size);\n    }\n\n    return [x, y];\n  }\n\n  click($event) {\n    if (this.mode == 'brush') {\n      this.stopDrawing($event);\n      this.draw(...this.getXY($event));\n    }\n\n    if (this.mode == 'fill') {\n      this.fill(...this.getXY($event));\n    }\n  }\n\n  getPatternCell(x, y) {\n    return this.pattern[x + y * this.width];\n  }\n\n  setPatternCell(x, y, color) {\n    this.pattern[x + y * this.width] = color;\n  }\n\n  draw(x, y) {\n    let canvas = $('#grid')[0];\n    let context = canvas.getContext('2d');\n\n    this.setPatternCell(x, y, this.color);\n    this.renderGrid();\n  }\n\n  fill(x, y) {\n    let oldColor = this.getPatternCell(x, y) || this.clearColor;\n    if (oldColor == $.color) return;\n\n    let stack = [\n      [x, y]\n    ];\n\n    while (stack.length) {\n\n      let cell = stack.pop();\n      let x = cell[0];\n      let y = cell[1];\n\n      this.setPatternCell(x, y, this.color);\n\n      if (x - 1 >= 0 && oldColor == (this.getPatternCell(x - 1, y) || 'ffffff'))\n        stack.push([x - 1, y]);\n\n      if (x + 1 < this.width && oldColor == (this.getPatternCell(x + 1, y) || 'ffffff'))\n        stack.push([x + 1, y]);\n\n      if (y - 1 >= 0 && oldColor == (this.getPatternCell(x, y - 1) || 'ffffff'))\n        stack.push([x, y - 1]);\n\n      if (y + 1 < this.height && oldColor == (this.getPatternCell(x, y + 1) || 'ffffff'))\n        stack.push([x, y + 1]);\n    }\n\n    this.renderGrid();\n  }\n\n  renderGrid() {\n    let canvas = $('#grid');\n    let context = canvas[0].getContext('2d');\n\n    let size = this.width > this.height ? this.canvasWidth / this.width : this.canvasHeight / this.height;\n\n    if (this.align !== 'normal') {\n      size = this.width > this.height ? size - size / this.width / 2 : size - size / this.height / 2;\n    }\n\n    let horizontalOffset = this.align == 'horizontal' ? size / 2: 0;\n    let verticalOffset = this.align == 'vertical' ? size / 2 : 0;\n    let centeringOffset = (this.canvasWidth - size * this.width - horizontalOffset) / 2;\n\n    canvas.attr('width', canvas.attr('width')); // Clear canvas\n\n    for (let x = 0; x < this.width; x++) {\n      for (let y = 0; y < this.height; y++) {\n        context.beginPath();\n        context.arc(x * size + size / 2 + (!(y % 2) ? horizontalOffset : 0) + centeringOffset, y * size + size / 2 + (x % 2 ? verticalOffset : 0), size / 2 - 1, 0, 2 * Math.PI, false);\n        context.fillStyle = '#' + (this.getPatternCell(x, y) || this.clearColor);\n        context.fill();\n        context.lineWidth = 1;\n        context.strokeStyle = '#ddd';\n        context.stroke();\n      }\n    }\n  }\n\n  save() {\n    this.saving = true;\n\n    let canvas = $('#grid');\n    let http = new HttpClient();\n\n    if(!this.pattern.find(cell => {\n      return cell !== this.pattern[0];\n    })){\n      this.saving = false;\n      return alert('Pattern must have more than one color!');\n    }\n\n    this.http.fetch('/patterns', {\n      method: 'post',\n      body: json({\n        name: this.name,\n        description: '',\n        width: this.width,\n        height: this.height,\n        align: this.align,\n        pattern: this.pattern,\n        image: canvas[0].toDataURL('image/png')\n      })\n    })\n    .then(response => response.json())\n    .then(response => {\n      $('#save-button').prop('disabled', false);\n      $('#save-button').text('Save');\n      this.saving = false;\n      this.router.navigateToRoute('pattern', {id: response._id});\n    })\n    .catch(error => {\n      alert('Error: ' + error);\n      this.saving = false;\n    });\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport authConfig from './authConfig';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-auth', baseConfig => {\n      baseConfig.configure(authConfig);\n    })\n    .plugin('aurelia-google-analytics', config => {\n        config.init('UA-89265200-1');\n        config.attach({\n          logging: {\n            enabled: true\n          },\n          pageTracking: {\n            enabled: true\n          },\n          clickTracking: {\n            enabled: true\n          }\n        });\n    });\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {App} from './app';\nimport {Router} from 'aurelia-router';\n\n@inject(HttpClient, App, Router)\nexport class Pattern {\n  pattern = {}\n  userPatterns = []\n  totalUserPatterns = 0\n  userPatternsLimit = 10\n  errorMessage = null\n\n  constructor(http, app, router) {\n    this.http = http;\n    this.app = app;\n    this.router = router;\n  }\n\n  activate(params, routeConfig) {\n    return this.http.fetch(`/patterns/${params.id}`)\n      .then(response => response.json())\n      .then(pattern => {\n        this.pattern = pattern;\n        routeConfig.navModel.setTitle(pattern.name);\n        this.fetchUserPatterns(pattern.user._id);\n      })\n      .catch(err => {\n        this.errorMessage = 'Pattern not found.';\n      });\n  }\n\n  fetchUserPatterns(userId) {\n    return this.http.fetch(`/patterns/user/${userId}?page=1&limit=${this.userPatternsLimit}`)\n      .then(response => response.json())\n      .then(response => {\n        this.userPatterns = response.patterns.filter(pattern => {\n\n          // Filter out the pattern we're viewing\n\n          return pattern._id !== this.pattern._id;\n        })\n        this.totalUserPatterns = response.totalPatterns;\n      });\n  }\n\n  delete() {\n    if(confirm('Are you sure you want to delete this pattern?')){\n      return this.http.fetch(`/patterns/${this.pattern._id}`, {\n        method: 'delete'\n      })\n        .then(response => {\n          this.router.navigateToRoute('patterns');\n        });\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {activationStrategy} from 'aurelia-router';\n\n@inject(HttpClient)\nexport class Patterns {\n  patterns = []\n  page = 1\n  limit = 20\n  showNext = false\n  showPrevious = false\n  loading = true\n\n  constructor(http) {\n    this.http = http;\n  }\n\n  determineActivationStrategy() {\n    return activationStrategy.replace;\n  }\n\n  activate(params, routeConfig) {\n    this.page = params.page ? parseInt(params.page, 10) : 1;\n    \n    this.http.fetch(`/patterns?page=${this.page}&limit=${this.limit}`)\n      .then(response => response.json())\n      .then(response => {\n        this.patterns = response.patterns\n\n        if(this.page > 1){\n          this.showPrevious = true;\n        }\n        if(this.page < response.totalPages){\n          this.showNext = true;\n        }\n\n        this.loading = false;\n      });\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {activationStrategy} from 'aurelia-router';\n\n@inject(HttpClient)\nexport class PatternsByUser {\n  patterns = []\n  page = 1\n  limit = 20\n  showNext = false\n  showPrevious = false\n  loading = true\n\n  constructor(http) {\n    this.http = http;\n  }\n\n  determineActivationStrategy() {\n    return activationStrategy.replace;\n  }\n\n  activate(params, routeConfig) {\n    this.page = params.page ? parseInt(params.page, 10) : 1;\n\n    this.http.fetch(`/patterns/user/${params.id}?page=${this.page}&limit=${this.limit}`)\n      .then(response => response.json())\n      .then(response => {\n        this.patterns = response.patterns\n\n        if(this.page > 1){\n          this.showPrevious = true;\n        }\n        if(this.page < response.totalPages){\n          this.showNext = true;\n        }\n\n        if(this.patterns.length){\n          routeConfig.navModel.setTitle(`Patterns by ${this.patterns[0].user.displayName}`);\n        }\n\n        this.loading = false\n      });\n  }\n}\n","export function configure(config) {\n  config.globalResources([\n    './elements/loadingIndicator'\n  ]);\n}","import {bindable} from 'aurelia-framework';\n\nexport class LoadingIndicator {\n  @bindable loading = false;\n}",null],"sourceRoot":"../src"}