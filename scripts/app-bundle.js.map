{"version":3,"sources":["app.js","environment.js","main.js","resources/index.js","designer.js","styles.styl"],"names":["App","configureRouter","config","router","title","map","route","moduleId","name","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Designer","colors","data","width","height","align","mode","color","clearColor","drawing","attached","$","css","renderPalette","renderGrid","palette","context","getContext","y","x","beginPath","fillStyle","fillRect","strokeStyle","lineWidth","stroke","selectColor","$event","Math","floor","offsetX","pageX","offset","left","offsetY","pageY","top","setMode","setAlign","startDrawing","stopDrawing","drag","draw","click","canvas","size","fill","oldColor","stack","length","cell","pop","push","horizontalOffset","verticalOffset","attr","arc","PI","save","prop","text","doc","image","toDataURL","replace","_id"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Router, RouterConfiguration} from 'aurelia-router';\n\nexport class App {\n  constructor() {}\n\n  configureRouter(config: RouterConfiguration, router: Router){\n    config.title = 'Contacts';\n    config.map([\n      { route: '', moduleId: 'designer', title: 'Beader.org' },\n      { route: 'designer',  moduleId: 'designer', name:'designer' }\n    ]);\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class Designer {\n  constructor() {}\n\n  // Palette colors\n\n  colors = [\"000000\", \"002000\", \"003400\", \"006700\", \"009b00\", \"00ce00\", \"00ff00\", \"070707\", \"000035\", \"003333\", \"006731\", \"009b2c\", \"00ce23\", \"00ff10\", \"0e0e0e\", \"000068\", \"003268\", \"006667\", \"009a64\", \"00ce62\", \"00ff5d\", \"151515\", \"00009c\", \"002f9c\", \"00659b\", \"009a9a\", \"00cd98\", \"00ff95\", \"1c1c1c\", \"0000d0\", \"0029cf\", \"0063cf\", \"0099cf\", \"00cccd\", \"00ffcc\", \"232323\", \"0000ff\", \"0021ff\", \"0060ff\", \"0096ff\", \"00cbff\", \"00ffff\", \"2a2a2a\", \"340000\", \"333300\", \"316700\", \"2d9a00\", \"26ce00\", \"1bff00\", \"313131\", \"340034\", \"333333\", \"316731\", \"2d9a2b\", \"26ce22\", \"1aff0f\", \"383838\", \"330068\", \"333268\", \"306666\", \"2d9a64\", \"26ce61\", \"1aff5c\", \"3f3f3f\", \"32009b\", \"332f9c\", \"30649a\", \"2d999a\", \"25cd98\", \"19ff96\", \"464646\", \"3300d0\", \"3129cf\", \"3063cf\", \"2c99cf\", \"24cccd\", \"17ffcb\", \"4d4d4d\", \"3100ff\", \"3021ff\", \"2e60ff\", \"2a96ff\", \"23cbff\", \"15ffff\", \"545454\", \"670000\", \"673300\", \"676700\", \"649a00\", \"62ce00\", \"5fff00\", \"5b5b5b\", \"670033\", \"673332\", \"666730\", \"659a2a\", \"62ce21\", \"5eff0b\", \"626262\", \"670068\", \"673167\", \"666666\", \"649a64\", \"61cd60\", \"5eff5c\", \"696969\", \"67009c\", \"672e9c\", \"66659b\", \"64999a\", \"61cd97\", \"5eff95\", \"707070\", \"6600cf\", \"6729d0\", \"6663cf\", \"6498ce\", \"62cdcd\", \"5dffcb\", \"777777\", \"6700ff\", \"6621ff\", \"655fff\", \"6497ff\", \"61cbff\", \"5dffff\", \"7e7e7e\", \"9b0000\", \"9a3200\", \"9a6700\", \"999a00\", \"98ce00\", \"96ff00\", \"858585\", \"9a0031\", \"9b3230\", \"9a672e\", \"999a28\", \"98ce1e\", \"96ff05\", \"8c8c8c\", \"9b0067\", \"9a3066\", \"9a6665\", \"999a64\", \"97cd60\", \"95ff5b\", \"939393\", \"9b009b\", \"9a2d9a\", \"9a659a\", \"999999\", \"98cd97\", \"95ff94\", \"9a9a9a\", \"9a00cf\", \"9a28cf\", \"9a63cf\", \"9897cd\", \"97cccc\", \"95ffcb\", \"a1a1a1\", \"9a00ff\", \"9a1fff\", \"995fff\", \"9997ff\", \"97cbff\", \"95ffff\", \"a8a8a8\", \"cf0000\", \"cf3200\", \"ce6600\", \"cd9a00\", \"cdce00\", \"cbff00\", \"afafaf\", \"cf002e\", \"ce312d\", \"ce662a\", \"cd9a24\", \"cccd19\", \"cbff00\", \"b6b6b6\", \"ce0065\", \"ce3065\", \"cd6563\", \"cd9962\", \"cccd5e\", \"cbff5a\", \"bdbdbd\", \"ce009a\", \"ce2d9a\", \"cd6499\", \"cd9998\", \"cccc96\", \"cbff94\", \"c4c4c4\", \"ce00cf\", \"ce27ce\", \"ce62ce\", \"cd97cd\", \"cccccc\", \"cbffcb\", \"cbcbcb\", \"ce00ff\", \"ce1eff\", \"cd5fff\", \"cd96ff\", \"cccbff\", \"caffff\", \"d2d2d2\", \"ff0000\", \"ff3000\", \"ff6600\", \"ff9a00\", \"ffce00\", \"ffff00\", \"d9d9d9\", \"ff002a\", \"ff3028\", \"ff6525\", \"ff991e\", \"ffcd0f\", \"ffff00\", \"e0e0e0\", \"ff0064\", \"ff2e64\", \"ff6563\", \"ff9960\", \"ffcd5d\", \"ffff58\", \"e7e7e7\", \"ff0099\", \"ff2b99\", \"ff6398\", \"ff9998\", \"ffcd96\", \"ffff92\", \"eeeeee\", \"ff00ce\", \"ff25ce\", \"ff61cd\", \"ff98cd\", \"ffcccb\", \"ffffc9\", \"f5f5f5\", \"ff00ff\", \"ff1cff\", \"ff5eff\", \"ff96ff\", \"ffcbff\", \"ffffff\"];\n\n  // Data\n\n  data = {};\n\n  // Defaults\n\n  width = 10;\n  height = 10;\n  name = \"Untitled Pattern\";\n  align = \"normal\";\n  mode = \"brush\";\n  color = \"000000\";\n  clearColor = \"ffffff\";\n  drawing = false;\n\n  attached() {\n\n    // Set color\n\n    $(\"#color\").css(\"backgroundColor\", \"#\" + this.color);\n\n    // We're editing a pattern, load it from the backend\n\n    // if($routeParams.id){\n    //     $http.get(\"/pattern/\" + $routeParams.id + \".json\").\n    //         success(function(pattern){\n    //             this.width = pattern.width;\n    //             this.height = pattern.height;\n    //             this.name = pattern.name;\n    //             this.align = pattern.align;\n    //             this.mode = pattern.mode;\n    //             this.data = pattern.data;\n    //             this._id = pattern._id;\n    //\n    //             this.renderGrid();\n    //         });\n    // }\n\n    this.renderPalette();\n    this.renderGrid();\n  }\n\n  // Render render the palette canvas\n\n  renderPalette() {\n    let palette = $(\"#palette\")[0];\n    let context = palette.getContext(\"2d\");\n\n    let width = ($(palette).width() - 1) / 7 - 1;\n    let height = ($(palette).height() - 1) / 36 - 1;\n\n    for (let y = 0; y < 36; y++) {\n      for (let x = 0; x < 7; x++) {\n        context.beginPath();\n        context.fillStyle = \"#\" + this.colors[y * 7 + x];\n        context.fillRect(x * (width + 1), y * (height + 1), width, height);\n        context.strokeStyle = \"#ffffff\";\n        context.lineWidth = 1;\n        context.stroke();\n      }\n    }\n  }\n\n  selectColor($event) {\n    let palette = $(\"#palette\")[0];\n    let context = palette.getContext(\"2d\");\n\n    let width = Math.floor(($(palette).width() - 1) / 7 - 1);\n    let height = Math.floor(($(palette).height() - 1) / 36 - 1);\n\n    let offsetX = $event.pageX - $(palette).offset().left;\n    let offsetY = $event.pageY - $(palette).offset().top;\n\n    let x = Math.floor(offsetX / (width + 1));\n    let y = Math.floor(offsetY / (height + 1));\n\n    this.color = this.colors[y * 7 + x];\n\n    $(\"#color\").css(\"backgroundColor\", \"#\" + this.color);\n  }\n\n  setMode(mode) {\n    this.mode = mode;\n  }\n\n  setAlign(align) {\n    this.align = align;\n    this.renderGrid();\n  }\n\n  startDrawing($event) {\n    this.drawing = true;\n  }\n\n  stopDrawing($event) {\n    this.drawing = false;\n  }\n\n  drag($event) {\n    if (this.drawing && this.mode == \"brush\") {\n      this.draw($event);\n    }\n  }\n\n  click($event) {\n    if (this.mode == \"brush\") {\n      this.stopDrawing($event);\n      this.draw($event);\n    }\n\n    if (this.mode == \"fill\") {\n      let canvas = $(\"#grid\")[0];\n      let context = canvas.getContext(\"2d\");\n\n      let size = this.width > this.height ? $(canvas).width() / width : $(canvas).height() / this.height;\n      let x = Math.floor($event.offsetX / size);\n      let y = Math.floor($event.offsetY / size);\n\n      this.fill($event, x, y);\n    }\n  }\n\n  draw($event) {\n    let canvas = $(\"#grid\")[0];\n    let context = canvas.getContext(\"2d\");\n\n    let size = this.width > this.height ? $(canvas).width() / width : $(canvas).height() / this.height;\n    let x = Math.floor($event.offsetX / size);\n    let y = Math.floor($event.offsetY / size);\n\n    this.data[x + \"x\" + y] = this.color;\n    this.renderGrid($event);\n  }\n\n  fill($event, x, y) {\n    let oldColor = this.data[x + \"x\" + y] || this.clearColor;\n    if (oldColor == $.color) return;\n\n    let stack = [\n      [x, y]\n    ];\n\n    while (stack.length) {\n\n      let cell = stack.pop();\n      let x = cell[0];\n      let y = cell[1];\n\n      this.data[x + \"x\" + y] = this.color;\n\n      if (x - 1 >= 0 && oldColor == (this.data[(x - 1) + \"x\" + y] || \"ffffff\"))\n        stack.push([x - 1, y]);\n\n      if (x + 1 < this.width && oldColor == (this.data[(x + 1) + \"x\" + y] || \"ffffff\"))\n        stack.push([x + 1, y]);\n\n      if (y - 1 >= 0 && oldColor == (this.data[x + \"x\" + (y - 1)] || \"ffffff\"))\n        stack.push([x, y - 1]);\n\n      if (y + 1 < this.height && oldColor == (this.data[x + \"x\" + (y + 1)] || \"ffffff\"))\n        stack.push([x, y + 1]);\n    }\n\n    this.renderGrid($event);\n  }\n\n  renderGrid($event) {\n    var canvas = $(\"#grid\");\n    var context = canvas[0].getContext(\"2d\");\n\n    var size = this.width > this.height ? canvas.width() / this.width : canvas.height() / this.height;\n\n    if (this.align !== \"normal\") {\n      size = this.width > this.height ? size - size / this.width / 2 : size - size / this.height / 2;\n    }\n\n    let horizontalOffset = this.align == \"horizontal\" ? size / 2 : 0;\n    let verticalOffset = this.align == \"vertical\" ? size / 2 : 0;\n\n    canvas.attr(\"width\", canvas.attr(\"width\")); // Clear canvas\n\n    for (let x = 0; x < this.width; x++) {\n      for (let y = 0; y < this.height; y++) {\n        context.beginPath();\n        context.arc(x * size + size / 2 + (y % 2 ? horizontalOffset : 0), y * size + size / 2 + (x % 2 ? verticalOffset : 0), size / 2 - 1, 0, 2 * Math.PI, false);\n        context.fillStyle = '#' + (this.data[x + \"x\" + y] || this.clearColor);\n        context.fill();\n        context.lineWidth = 1;\n        context.strokeStyle = \"#ddd\";\n        context.stroke();\n      }\n    }\n  }\n\n  save($event) {\n    $(\"#save-button\").prop(\"disabled\", true);\n    $(\"#save-button\").text(\"Saving...\");\n\n    let canvas = $(\"#grid\");\n    let context = canvas[0].getContext(\"2d\");\n\n    let doc = {\n      name: this.name,\n      width: this.width,\n      height: this.height,\n      mode: this.mode,\n      align: this.align,\n      data: this.data,\n      image: canvas[0].toDataURL(\"image/png\").replace(/^data:image\\/(png|jpg);base64,/i, \"\")\n    }\n\n    if (this._id) {\n      doc._id = this._id;\n    }\n\n    // $http.post(\"/pattern\", doc).\n    //     success(function(){\n    //         $location.path(\"/\");\n    //     }).\n    //     error(function(response){\n    //         // TODO\n    //         console.log(\"Error saving\", response);\n    //         $(\"#save-button\").prop(\"disabled\", false);\n    //         $(\"#save-button\").text(\"Save\");\n    //     });\n  };\n}\n",null],"sourceRoot":"../src"}